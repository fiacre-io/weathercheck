/*! teleport-autocomplete - v0.3.3 | https://github.com/teleport/autocomplete#readme | MIT */
{"version":3,"sources":["node_modules/browser-pack/_prelude.js","js/autocomplete.js","node_modules/classlist-polyfill/src/index.js","node_modules/core-js/library/fn/array/find.js","node_modules/core-js/library/fn/object/assign.js","node_modules/core-js/library/fn/regexp/escape.js","node_modules/core-js/library/modules/$.a-function.js","node_modules/core-js/library/modules/$.add-to-unscopables.js","node_modules/core-js/library/modules/$.array-methods.js","node_modules/core-js/library/modules/$.array-species-create.js","node_modules/core-js/library/modules/$.cof.js","node_modules/core-js/library/modules/$.core.js","node_modules/core-js/library/modules/$.ctx.js","node_modules/core-js/library/modules/$.defined.js","node_modules/core-js/library/modules/$.export.js","node_modules/core-js/library/modules/$.fails.js","node_modules/core-js/library/modules/$.global.js","node_modules/core-js/library/modules/$.iobject.js","node_modules/core-js/library/modules/$.is-array.js","node_modules/core-js/library/modules/$.is-object.js","node_modules/core-js/library/modules/$.js","node_modules/core-js/library/modules/$.object-assign.js","node_modules/core-js/library/modules/$.replacer.js","node_modules/core-js/library/modules/$.shared.js","node_modules/core-js/library/modules/$.to-integer.js","node_modules/core-js/library/modules/$.to-length.js","node_modules/core-js/library/modules/$.to-object.js","node_modules/core-js/library/modules/$.uid.js","node_modules/core-js/library/modules/$.wks.js","node_modules/core-js/library/modules/es6.array.find.js","node_modules/core-js/library/modules/es6.object.assign.js","node_modules/core-js/library/modules/es7.regexp.escape.js","node_modules/date-now/index.js","node_modules/debounce/index.js","node_modules/element-closest/closest.js","node_modules/halfred/halfred.js","node_modules/halfred/lib/immutable_stack.js","node_modules/halfred/lib/parser.js","node_modules/halfred/lib/resource.js","node_modules/minivents/dist/minivents.commonjs.min.js"],"names":[],"mappings":"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BAAiB;;AAClE,sDAAO,MAAM,EAAE,EAAE,MAAM,EAAN,MAAM,EAAE,IAAI,EAAJ,IAAI,EAAE,SAAS,EAAT,SAAS,EAAE,MAAM,EAAN,MAAM,EAAE,CAAC,CAAC;OACrD;;AAED,aAAO,MAAM,CAAC;KACf;;;WAvSU,cAAC,EAAE,EAAgB;UAAd,OAAO,yDAAG,EAAE;;AAC1B,UAAM,GAAG,GAAG,AAAC,OAAO,EAAE,KAAK,QAAQ,IAAI,EAAE,YAAY,gBAAgB,GAAI,8CAAO,OAAO,EAAE,EAAE,EAAE,EAAF,EAAE,EAAE,CAAC,GAAG,EAAE,CAAC;AACtG,aAAO,IAAI,oBAAoB,CAAC,GAAG,CAAC,CAAC;KACtC;;;SAnEG,oBAAoB;;;qBA0WX,oBAAoB;;;;ACzYnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjPA;AACA;;ACDA;AACA;;ACDA;AACA;;ACDA;AACA;AACA;AACA;;ACHA;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACfA;AACA;AACA;AACA;AACA;;ACJA;AACA;;ACDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnBA;AACA;AACA;AACA;AACA;;ACJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC7CA;AACA;AACA;AACA;AACA;AACA;AACA;;ACNA;AACA;AACA;AACA;;ACHA;AACA;AACA;AACA;AACA;;ACJA;AACA;AACA;AACA;AACA;;ACJA;AACA;AACA;;ACFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACPA;AACA;AACA;AACA;AACA;AACA;;ACLA;AACA;AACA;AACA;AACA;AACA;;ACLA;AACA;AACA;AACA;AACA;AACA;;ACLA;AACA;AACA;AACA;AACA;;ACJA;AACA;AACA;AACA;AACA;;ACJA;AACA;AACA;AACA;AACA;AACA;AACA;;ACNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACbA;AACA;AACA;AACA;;ACHA;AACA;AACA;AACA;AACA;AACA;;ACLA;AACA;AACA;AACA;AACA;AACA;;ACLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACrDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACrBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC3CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/HA","file":"teleport-autocomplete.js","sourceRoot":"..","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","import 'classlist-polyfill';\r\nimport 'element-closest';\r\n\r\nimport halfred from 'halfred';\r\nimport events from 'minivents';\r\n\r\nimport assign from 'core-js/library/fn/object/assign';\r\nimport find from 'core-js/library/fn/array/find';\r\nimport escapeRegexp from 'core-js/library/fn/regexp/escape';\r\nimport debounce from 'debounce';\r\n\r\nconst Key = { BACK: 8, TAB: 9, ENTER: 13, UP: 38, DOWN: 40 };\r\nconst CONTAINER_TEMPLATE = '<div class=\"tp-autocomplete\"><ul class=\"tp-ac__list\"></ul></div>';\r\nconst INPUT_CLASS = 'tp-ac__input';\r\nconst itemWrapperTemplate = item => `<li class=\"tp-ac__item\">${item}</li>`;\r\nconst NO_RESULTS_TEMPLATE = '<li class=\"tp-ac__item no-results\">No matches</li>';\r\nconst GEOLOCATE_TEMPLATE = '<li class=\"tp-ac__item geolocate\">Detect my current location</li>';\r\n\r\n// Default item template, wraps title matches\r\nconst ITEM_TEMPLATE = function renderItem(item) {\r\n  return this.wrapMatches(item.title);\r\n};\r\n\r\n// Shorthands\r\nHTMLElement.prototype.on = HTMLElement.prototype.addEventListener;\r\nHTMLElement.prototype.off = HTMLElement.prototype.removeEventListener;\r\n\r\n\r\n/**\r\n * Teleport Cities Autocomplete\r\n */\r\nclass TeleportAutocomplete {\r\n  get query() { return this._query; }\r\n  set query(query) {\r\n    if (query === this._query) return query;\r\n\r\n    this._query = query;\r\n    this.el.value = query;\r\n    this.emit('querychange', query);\r\n  }\r\n\r\n  get activeIndex() { return this._activeIndex; }\r\n  set activeIndex(index) {\r\n    // Remove old highlight\r\n    const oldNode = this.list.childNodes[this._activeIndex];\r\n    if (oldNode) oldNode.classList.remove('is-active');\r\n\r\n    this._activeIndex = index;\r\n\r\n    // Set highlight\r\n    const activeNode = this.list.childNodes[index];\r\n    if (activeNode) activeNode.classList.add('is-active');\r\n  }\r\n\r\n  // Show or hide loading\r\n  set loading(toggle) {\r\n    this.container.classList.toggle('spinner', toggle);\r\n  }\r\n\r\n\r\n  /**\r\n   * Parse arguments and wrap input\r\n   */\r\n  constructor({\r\n    el = null, value, maxItems = 10, itemTemplate = ITEM_TEMPLATE,\r\n    geoLocate = true, apiRoot = 'https://api.teleport.org/api', apiVersion = 1,\r\n    embeds = 'city:country,city:admin1_division,city:timezone/tz:offsets-now,city:urban_area',\r\n  } = {}) {\r\n    events(this);\r\n\r\n    const elem = (typeof el === 'string') ? document.querySelector(el) : el;\r\n    this.setupInput(elem);\r\n\r\n    assign(this, {\r\n      maxItems, geoLocate, apiRoot, apiVersion, itemTemplate, embeds, results: [],\r\n      _activeIndex: 0, _cache: {}, _query: this.el.value, value,\r\n    });\r\n\r\n    // Prefetch results\r\n    if (this.value && this.value.title) {\r\n      this.query = this.value.title;\r\n    } else if (this.query) {\r\n      this.fetchResults(() => {\r\n        this.value = this.getResultByTitle(this.query);\r\n        this.emit('change', this.value);\r\n      });\r\n    }\r\n\r\n    this.getCities = debounce(this.getCities, 200);\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Init shorthand\r\n   */\r\n  static init(el, options = {}) {\r\n    const opt = (typeof el === 'string' || el instanceof HTMLInputElement) ? assign(options, { el }) : el;\r\n    return new TeleportAutocomplete(opt);\r\n  }\r\n\r\n\r\n  /**\r\n   * Clean up the container\r\n   */\r\n  destroy() {\r\n    this.el.off('input', this.oninput);\r\n    this.el.off('keydown', this.onkeydown);\r\n    this.el.off('focus', this.onfocus);\r\n    this.el.off('blur', this.onblur);\r\n    this.el.off('click', this.onclick);\r\n\r\n    this.el.classList.remove(INPUT_CLASS);\r\n\r\n    const containerParent = this.container.parentNode;\r\n    containerParent.replaceChild(this.el.parentNode.removeChild(this.el), this.container);\r\n  }\r\n\r\n\r\n  /**\r\n   * Clear the selected value\r\n   */\r\n  clear() {\r\n    this.results = [];\r\n    this.selectByIndex(0);\r\n  }\r\n\r\n\r\n  /**\r\n   * Wrap input node in container\r\n   */\r\n  setupInput(el) {\r\n    if (!el || !(el instanceof HTMLInputElement)) throw new Error('Invalid element given');\r\n\r\n    el.insertAdjacentHTML('beforebegin', CONTAINER_TEMPLATE);\r\n    Object.defineProperty(this, 'container', { value: el.previousSibling });\r\n    Object.defineProperty(this, 'list', { value: this.container.firstChild });\r\n\r\n    const input = this.container.insertBefore(el.parentNode.removeChild(el), this.list);\r\n    input.classList.add(INPUT_CLASS);\r\n\r\n    Object.defineProperty(this, 'el', { enumerable: true, value: input });\r\n\r\n    this.el.on('input', this.oninput.bind(this));\r\n    this.el.on('keydown', this.onkeydown.bind(this));\r\n    this.el.on('focus', this.onfocus.bind(this));\r\n    this.el.on('blur', this.onblur.bind(this));\r\n    this.el.on('click', this.onclick.bind(this));\r\n\r\n    this.list.on('mousedown', this.onlistclick.bind(this));\r\n  }\r\n\r\n  /**\r\n   * Event handlers\r\n   */\r\n\r\n  // Clicked on list item, select item\r\n  onlistclick(event) {\r\n    const index = [].indexOf.call(this.list.children, event.target.closest('.tp-ac__item'));\r\n    this.selectByIndex(index);\r\n  }\r\n\r\n  // Select text on click\r\n  onclick() { this.el.select(); }\r\n\r\n  // Input has focus, open list\r\n  onfocus() { this.renderList(); }\r\n\r\n  // Input lost focus, close list\r\n  onblur() { this.list.innerHTML = ''; }\r\n\r\n  // Input was typed into\r\n  oninput() {\r\n    this._query = this.el.value;\r\n    this.fetchResults(() => this.renderList());\r\n  }\r\n\r\n  // Called on keypresses\r\n  onkeydown(event) {\r\n    const code = event.keyCode;\r\n\r\n    // Prevent cursor move\r\n    if ([Key.UP, Key.DOWN].indexOf(code) !== -1) event.preventDefault();\r\n\r\n    switch (code) {\r\n    case Key.BACK:\r\n      // Clear filled value or last char\r\n      if (this.value || this.query.length === 1) this.clear();\r\n      break;\r\n    case Key.ENTER:\r\n      // Prevent submit if query is to be selected\r\n      if (!this.value && this.query) event.preventDefault();\r\n      this.selectByIndex(this.activeIndex);\r\n      break;\r\n    case Key.TAB: if (!this.value) this.selectByIndex(this.activeIndex);\r\n      break;\r\n    case Key.UP: this.activeIndex = Math.max(0, this.activeIndex - 1);\r\n      break;\r\n    case Key.DOWN: this.activeIndex = Math.min(this.results.length - 1, this.activeIndex + 1);\r\n      break;\r\n    }\r\n  }\r\n  // ---------------------------------------------------------------------------\r\n\r\n\r\n  /**\r\n   * Select option from list by index\r\n   */\r\n  selectByIndex(index) {\r\n    this.activeIndex = index;\r\n    const oldValue = this.value;\r\n    this.value = this.results[index] || null;\r\n\r\n    const isGeolocate = this.list.firstChild && this.list.firstChild.classList.contains('geolocate');\r\n    if (isGeolocate) this.currentLocation();\r\n\r\n    if (oldValue !== this.value && !isGeolocate) this.emit('change', this.value);\r\n\r\n    this.list.innerHTML = '';\r\n    this.query = this.value ? this.value.title : '';\r\n  }\r\n\r\n\r\n  /**\r\n   * Wrap matching result names in <span>s\r\n   */\r\n  wrapMatches(str = '') {\r\n    let res = str;\r\n\r\n    this.query\r\n      .split(/[\\,\\s]+/)\r\n      .filter(qr => !!qr)\r\n      .forEach(query => {\r\n        const matcher = new RegExp(escapeRegexp(query) + '(?![^<]*>|[^<>]*<\\/)', 'gi');\r\n        res = res.replace(matcher, '<span>$&</span>');\r\n      });\r\n\r\n    return res;\r\n  }\r\n\r\n\r\n  /**\r\n   * Render result list\r\n   */\r\n  renderList({ geoLocate = this.geoLocate } = {}) {\r\n    let results = this.results.map(res =>\r\n      itemWrapperTemplate(this.itemTemplate(res)))\r\n      .slice(0, this.maxItems).join('');\r\n\r\n    if (!results && this.query !== '' && !this.value) results = NO_RESULTS_TEMPLATE;\r\n    if (this.query === '' && geoLocate) results = GEOLOCATE_TEMPLATE;\r\n    this.list.innerHTML = results;\r\n\r\n    this.activeIndex = 0;\r\n  }\r\n\r\n\r\n  /**\r\n   * Fetch value from results by title\r\n   */\r\n  getResultByTitle(title) {\r\n    if (!this.results || !title) return null;\r\n    return find(this.results, res => res.title.indexOf(title) !== -1);\r\n  }\r\n\r\n\r\n  /**\r\n   * Fetch picker data from cache or API\r\n   */\r\n  fetchResults(cb = function noop() {}) {\r\n    // Cancel old request\r\n    if (this.req) this.req.abort();\r\n\r\n    const cached = this._cache[this.query];\r\n    if (cached) {\r\n      this.results = cached;\r\n      return cb();\r\n    }\r\n\r\n    this.req = this.getCities(results => {\r\n      this.results = this._cache[this.query] = results;\r\n      cb();\r\n      this.loading = false;\r\n    });\r\n\r\n    this.loading = true;\r\n  }\r\n\r\n\r\n  /**\r\n   * Geolocate current city\r\n   */\r\n  currentLocation() {\r\n    const req = new XMLHttpRequest();\r\n    const embed = `location:nearest-cities/location:nearest-city/${this.embeds ? `{${this.embeds}}` : ''}`;\r\n\r\n    this.loading = true;\r\n    this.oldPlaceholder = this.el.placeholder;\r\n    this.el.placeholder = 'Detecting location...';\r\n\r\n    navigator.geolocation.getCurrentPosition(({ coords }) => {\r\n      req.open('GET', `${this.apiRoot}/locations/${coords.latitude},${coords.longitude}/?embed=${embed}`);\r\n      req.setRequestHeader('Accept', `application/vnd.teleport.v${this.apiVersion}+json`);\r\n      req.addEventListener('load', () => this.parseLocation(JSON.parse(req.response)));\r\n      req.send();\r\n    }, ({ message }) => {\r\n      this.loading = false;\r\n      this.el.placeholder = message;\r\n      setTimeout(() => this.el.placeholder = this.oldPlaceholder, 3000);\r\n    }, { timeout: 5000 });\r\n  }\r\n\r\n\r\n  /**\r\n   * Parse current location API response\r\n   */\r\n  parseLocation(json) {\r\n    const res = halfred.parse(json);\r\n    const nearest = res.embeddedArray('location:nearest-cities')[0];\r\n    if (nearest) {\r\n      this.results = [this.parseCity(nearest)];\r\n      if (this.geoLocate === 'nopick') {\r\n        this.el.focus();\r\n        this.renderList({ geoLocate: false });\r\n      } else {\r\n        this.selectByIndex(0);\r\n      }\r\n    }\r\n    this.loading = false;\r\n    this.el.placeholder = this.oldPlaceholder;\r\n  }\r\n\r\n\r\n  /**\r\n   * Make the API call\r\n   */\r\n  getCities(cb) {\r\n    if (!this.query) return cb([]);\r\n    const embed = `city:search-results/city:item/${this.embeds ? `{${this.embeds}}` : ''}`;\r\n\r\n    const req = new XMLHttpRequest();\r\n    const query = encodeURIComponent(this.query);\r\n    req.open('GET', `${this.apiRoot}/cities/?search=${query}&embed=${embed}&limit=${this.maxItems}`);\r\n    req.setRequestHeader('Accept', `application/vnd.teleport.v${this.apiVersion}+json`);\r\n    req.addEventListener('load', () => {\r\n      const results = halfred.parse(JSON.parse(req.response))\r\n        .embeddedArray('city:search-results')\r\n        .map(res => this.parseCity(res));\r\n\r\n      cb(results);\r\n    });\r\n    req.send();\r\n\r\n    return req;\r\n  }\r\n\r\n\r\n  /**\r\n   * Parse city\r\n   */\r\n  parseCity(res) {\r\n    const city = res.embedded('location:nearest-city') || res.embedded('city:item');\r\n    city.country = city.embedded('city:country');\r\n    city.admin1_division = city.embedded('city:admin1_division');\r\n    city.timezone = city.embedded('city:timezone');\r\n    city.urban_area = city.embedded('city:urban_area');\r\n\r\n    const { full_name: fullName, name, geoname_id: geonameId, population,\r\n      location: { latlon: { latitude, longitude } } } = city;\r\n\r\n    const { matching_full_name: title = fullName } = res;\r\n\r\n    const result = { title, name, geonameId, latitude, longitude, population };\r\n\r\n    if (city.country) assign(result, { country: city.country.name });\r\n    if (city.admin1_division) {\r\n      const { name: admin1Division, geonames_admin1_code: admin1DivisionCode } = city.admin1_division;\r\n      assign(result, { admin1Division, admin1DivisionCode });\r\n    }\r\n\r\n    if (city.timezone) {\r\n      const tzNow = city.timezone.embedded('tz:offsets-now');\r\n      assign(result, { tzOffsetMinutes: tzNow.total_offset_min });\r\n    }\r\n\r\n    if (city.urban_area) {\r\n      const { slug: uaSlug, name: uaName, ua_id: uaId, teleport_city_url: uaCityUrl } = city.urban_area;\r\n      assign(result, { uaName, uaId, uaCityUrl, uaSlug });\r\n    }\r\n\r\n    return result;\r\n  }\r\n}\r\n\r\nexport default TeleportAutocomplete;\r\n","/*\n * classList.js: Cross-browser full element.classList implementation.\n * 2014-07-23\n *\n * By Eli Grey, http://eligrey.com\n * Public Domain.\n * NO WARRANTY EXPRESSED OR IMPLIED. USE AT YOUR OWN RISK.\n */\n\n/*global self, document, DOMException */\n\n/*! @source http://purl.eligrey.com/github/classList.js/blob/master/classList.js*/\n\n/* Copied from MDN:\n * https://developer.mozilla.org/en-US/docs/Web/API/Element/classList\n */\n\nif (\"document\" in window.self) {\n\n  // Full polyfill for browsers with no classList support\n  // Including IE < Edge missing SVGElement.classList\n  if (!(\"classList\" in document.createElement(\"_\"))\n    || document.createElementNS && !(\"classList\" in document.createElementNS(\"http://www.w3.org/2000/svg\",\"g\"))) {\n\n  (function (view) {\n\n    \"use strict\";\n\n    if (!('Element' in view)) return;\n\n    var\n        classListProp = \"classList\"\n      , protoProp = \"prototype\"\n      , elemCtrProto = view.Element[protoProp]\n      , objCtr = Object\n      , strTrim = String[protoProp].trim || function () {\n        return this.replace(/^\\s+|\\s+$/g, \"\");\n      }\n      , arrIndexOf = Array[protoProp].indexOf || function (item) {\n        var\n            i = 0\n          , len = this.length\n        ;\n        for (; i < len; i++) {\n          if (i in this && this[i] === item) {\n            return i;\n          }\n        }\n        return -1;\n      }\n      // Vendors: please allow content code to instantiate DOMExceptions\n      , DOMEx = function (type, message) {\n        this.name = type;\n        this.code = DOMException[type];\n        this.message = message;\n      }\n      , checkTokenAndGetIndex = function (classList, token) {\n        if (token === \"\") {\n          throw new DOMEx(\n              \"SYNTAX_ERR\"\n            , \"An invalid or illegal string was specified\"\n          );\n        }\n        if (/\\s/.test(token)) {\n          throw new DOMEx(\n              \"INVALID_CHARACTER_ERR\"\n            , \"String contains an invalid character\"\n          );\n        }\n        return arrIndexOf.call(classList, token);\n      }\n      , ClassList = function (elem) {\n        var\n            trimmedClasses = strTrim.call(elem.getAttribute(\"class\") || \"\")\n          , classes = trimmedClasses ? trimmedClasses.split(/\\s+/) : []\n          , i = 0\n          , len = classes.length\n        ;\n        for (; i < len; i++) {\n          this.push(classes[i]);\n        }\n        this._updateClassName = function () {\n          elem.setAttribute(\"class\", this.toString());\n        };\n      }\n      , classListProto = ClassList[protoProp] = []\n      , classListGetter = function () {\n        return new ClassList(this);\n      }\n    ;\n    // Most DOMException implementations don't allow calling DOMException's toString()\n    // on non-DOMExceptions. Error's toString() is sufficient here.\n    DOMEx[protoProp] = Error[protoProp];\n    classListProto.item = function (i) {\n      return this[i] || null;\n    };\n    classListProto.contains = function (token) {\n      token += \"\";\n      return checkTokenAndGetIndex(this, token) !== -1;\n    };\n    classListProto.add = function () {\n      var\n          tokens = arguments\n        , i = 0\n        , l = tokens.length\n        , token\n        , updated = false\n      ;\n      do {\n        token = tokens[i] + \"\";\n        if (checkTokenAndGetIndex(this, token) === -1) {\n          this.push(token);\n          updated = true;\n        }\n      }\n      while (++i < l);\n\n      if (updated) {\n        this._updateClassName();\n      }\n    };\n    classListProto.remove = function () {\n      var\n          tokens = arguments\n        , i = 0\n        , l = tokens.length\n        , token\n        , updated = false\n        , index\n      ;\n      do {\n        token = tokens[i] + \"\";\n        index = checkTokenAndGetIndex(this, token);\n        while (index !== -1) {\n          this.splice(index, 1);\n          updated = true;\n          index = checkTokenAndGetIndex(this, token);\n        }\n      }\n      while (++i < l);\n\n      if (updated) {\n        this._updateClassName();\n      }\n    };\n    classListProto.toggle = function (token, force) {\n      token += \"\";\n\n      var\n          result = this.contains(token)\n        , method = result ?\n          force !== true && \"remove\"\n        :\n          force !== false && \"add\"\n      ;\n\n      if (method) {\n        this[method](token);\n      }\n\n      if (force === true || force === false) {\n        return force;\n      } else {\n        return !result;\n      }\n    };\n    classListProto.toString = function () {\n      return this.join(\" \");\n    };\n\n    if (objCtr.defineProperty) {\n      var classListPropDesc = {\n          get: classListGetter\n        , enumerable: true\n        , configurable: true\n      };\n      try {\n        objCtr.defineProperty(elemCtrProto, classListProp, classListPropDesc);\n      } catch (ex) { // IE 8 doesn't support enumerable:true\n        if (ex.number === -0x7FF5EC54) {\n          classListPropDesc.enumerable = false;\n          objCtr.defineProperty(elemCtrProto, classListProp, classListPropDesc);\n        }\n      }\n    } else if (objCtr[protoProp].__defineGetter__) {\n      elemCtrProto.__defineGetter__(classListProp, classListGetter);\n    }\n\n    }(window.self));\n\n    } else {\n    // There is full or partial native classList support, so just check if we need\n    // to normalize the add/remove and toggle APIs.\n\n    (function () {\n      \"use strict\";\n\n      var testElement = document.createElement(\"_\");\n\n      testElement.classList.add(\"c1\", \"c2\");\n\n      // Polyfill for IE 10/11 and Firefox <26, where classList.add and\n      // classList.remove exist but support only one argument at a time.\n      if (!testElement.classList.contains(\"c2\")) {\n        var createMethod = function(method) {\n          var original = DOMTokenList.prototype[method];\n\n          DOMTokenList.prototype[method] = function(token) {\n            var i, len = arguments.length;\n\n            for (i = 0; i < len; i++) {\n              token = arguments[i];\n              original.call(this, token);\n            }\n          };\n        };\n        createMethod('add');\n        createMethod('remove');\n      }\n\n      testElement.classList.toggle(\"c3\", false);\n\n      // Polyfill for IE 10 and Firefox <24, where classList.toggle does not\n      // support the second argument.\n      if (testElement.classList.contains(\"c3\")) {\n        var _toggle = DOMTokenList.prototype.toggle;\n\n        DOMTokenList.prototype.toggle = function(token, force) {\n          if (1 in arguments && !this.contains(token) === !force) {\n            return force;\n          } else {\n            return _toggle.call(this, token);\n          }\n        };\n\n      }\n\n      testElement = null;\n    }());\n  }\n}\n","require('../../modules/es6.array.find');\nmodule.exports = require('../../modules/$.core').Array.find;","require('../../modules/es6.object.assign');\nmodule.exports = require('../../modules/$.core').Object.assign;","require('../../modules/es7.regexp.escape');\nmodule.exports = require('../../modules/$.core').RegExp.escape;","module.exports = function(it){\n  if(typeof it != 'function')throw TypeError(it + ' is not a function!');\n  return it;\n};","module.exports = function(){ /* empty */ };","// 0 -> Array#forEach\n// 1 -> Array#map\n// 2 -> Array#filter\n// 3 -> Array#some\n// 4 -> Array#every\n// 5 -> Array#find\n// 6 -> Array#findIndex\nvar ctx      = require('./$.ctx')\n  , IObject  = require('./$.iobject')\n  , toObject = require('./$.to-object')\n  , toLength = require('./$.to-length')\n  , asc      = require('./$.array-species-create');\nmodule.exports = function(TYPE){\n  var IS_MAP        = TYPE == 1\n    , IS_FILTER     = TYPE == 2\n    , IS_SOME       = TYPE == 3\n    , IS_EVERY      = TYPE == 4\n    , IS_FIND_INDEX = TYPE == 6\n    , NO_HOLES      = TYPE == 5 || IS_FIND_INDEX;\n  return function($this, callbackfn, that){\n    var O      = toObject($this)\n      , self   = IObject(O)\n      , f      = ctx(callbackfn, that, 3)\n      , length = toLength(self.length)\n      , index  = 0\n      , result = IS_MAP ? asc($this, length) : IS_FILTER ? asc($this, 0) : undefined\n      , val, res;\n    for(;length > index; index++)if(NO_HOLES || index in self){\n      val = self[index];\n      res = f(val, index, O);\n      if(TYPE){\n        if(IS_MAP)result[index] = res;            // map\n        else if(res)switch(TYPE){\n          case 3: return true;                    // some\n          case 5: return val;                     // find\n          case 6: return index;                   // findIndex\n          case 2: result.push(val);               // filter\n        } else if(IS_EVERY)return false;          // every\n      }\n    }\n    return IS_FIND_INDEX ? -1 : IS_SOME || IS_EVERY ? IS_EVERY : result;\n  };\n};","// 9.4.2.3 ArraySpeciesCreate(originalArray, length)\nvar isObject = require('./$.is-object')\n  , isArray  = require('./$.is-array')\n  , SPECIES  = require('./$.wks')('species');\nmodule.exports = function(original, length){\n  var C;\n  if(isArray(original)){\n    C = original.constructor;\n    // cross-realm fallback\n    if(typeof C == 'function' && (C === Array || isArray(C.prototype)))C = undefined;\n    if(isObject(C)){\n      C = C[SPECIES];\n      if(C === null)C = undefined;\n    }\n  } return new (C === undefined ? Array : C)(length);\n};","var toString = {}.toString;\n\nmodule.exports = function(it){\n  return toString.call(it).slice(8, -1);\n};","var core = module.exports = {version: '1.2.6'};\nif(typeof __e == 'number')__e = core; // eslint-disable-line no-undef","// optional / simple context binding\nvar aFunction = require('./$.a-function');\nmodule.exports = function(fn, that, length){\n  aFunction(fn);\n  if(that === undefined)return fn;\n  switch(length){\n    case 1: return function(a){\n      return fn.call(that, a);\n    };\n    case 2: return function(a, b){\n      return fn.call(that, a, b);\n    };\n    case 3: return function(a, b, c){\n      return fn.call(that, a, b, c);\n    };\n  }\n  return function(/* ...args */){\n    return fn.apply(that, arguments);\n  };\n};","// 7.2.1 RequireObjectCoercible(argument)\nmodule.exports = function(it){\n  if(it == undefined)throw TypeError(\"Can't call method on  \" + it);\n  return it;\n};","var global    = require('./$.global')\n  , core      = require('./$.core')\n  , ctx       = require('./$.ctx')\n  , PROTOTYPE = 'prototype';\n\nvar $export = function(type, name, source){\n  var IS_FORCED = type & $export.F\n    , IS_GLOBAL = type & $export.G\n    , IS_STATIC = type & $export.S\n    , IS_PROTO  = type & $export.P\n    , IS_BIND   = type & $export.B\n    , IS_WRAP   = type & $export.W\n    , exports   = IS_GLOBAL ? core : core[name] || (core[name] = {})\n    , target    = IS_GLOBAL ? global : IS_STATIC ? global[name] : (global[name] || {})[PROTOTYPE]\n    , key, own, out;\n  if(IS_GLOBAL)source = name;\n  for(key in source){\n    // contains in native\n    own = !IS_FORCED && target && key in target;\n    if(own && key in exports)continue;\n    // export native or passed\n    out = own ? target[key] : source[key];\n    // prevent global pollution for namespaces\n    exports[key] = IS_GLOBAL && typeof target[key] != 'function' ? source[key]\n    // bind timers to global for call from export context\n    : IS_BIND && own ? ctx(out, global)\n    // wrap global constructors for prevent change them in library\n    : IS_WRAP && target[key] == out ? (function(C){\n      var F = function(param){\n        return this instanceof C ? new C(param) : C(param);\n      };\n      F[PROTOTYPE] = C[PROTOTYPE];\n      return F;\n    // make static versions for prototype methods\n    })(out) : IS_PROTO && typeof out == 'function' ? ctx(Function.call, out) : out;\n    if(IS_PROTO)(exports[PROTOTYPE] || (exports[PROTOTYPE] = {}))[key] = out;\n  }\n};\n// type bitmap\n$export.F = 1;  // forced\n$export.G = 2;  // global\n$export.S = 4;  // static\n$export.P = 8;  // proto\n$export.B = 16; // bind\n$export.W = 32; // wrap\nmodule.exports = $export;","module.exports = function(exec){\n  try {\n    return !!exec();\n  } catch(e){\n    return true;\n  }\n};","// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028\nvar global = module.exports = typeof window != 'undefined' && window.Math == Math\n  ? window : typeof self != 'undefined' && self.Math == Math ? self : Function('return this')();\nif(typeof __g == 'number')__g = global; // eslint-disable-line no-undef","// fallback for non-array-like ES3 and non-enumerable old V8 strings\nvar cof = require('./$.cof');\nmodule.exports = Object('z').propertyIsEnumerable(0) ? Object : function(it){\n  return cof(it) == 'String' ? it.split('') : Object(it);\n};","// 7.2.2 IsArray(argument)\nvar cof = require('./$.cof');\nmodule.exports = Array.isArray || function(arg){\n  return cof(arg) == 'Array';\n};","module.exports = function(it){\n  return typeof it === 'object' ? it !== null : typeof it === 'function';\n};","var $Object = Object;\nmodule.exports = {\n  create:     $Object.create,\n  getProto:   $Object.getPrototypeOf,\n  isEnum:     {}.propertyIsEnumerable,\n  getDesc:    $Object.getOwnPropertyDescriptor,\n  setDesc:    $Object.defineProperty,\n  setDescs:   $Object.defineProperties,\n  getKeys:    $Object.keys,\n  getNames:   $Object.getOwnPropertyNames,\n  getSymbols: $Object.getOwnPropertySymbols,\n  each:       [].forEach\n};","// 19.1.2.1 Object.assign(target, source, ...)\nvar $        = require('./$')\n  , toObject = require('./$.to-object')\n  , IObject  = require('./$.iobject');\n\n// should work with symbols and should have deterministic property order (V8 bug)\nmodule.exports = require('./$.fails')(function(){\n  var a = Object.assign\n    , A = {}\n    , B = {}\n    , S = Symbol()\n    , K = 'abcdefghijklmnopqrst';\n  A[S] = 7;\n  K.split('').forEach(function(k){ B[k] = k; });\n  return a({}, A)[S] != 7 || Object.keys(a({}, B)).join('') != K;\n}) ? function assign(target, source){ // eslint-disable-line no-unused-vars\n  var T     = toObject(target)\n    , $$    = arguments\n    , $$len = $$.length\n    , index = 1\n    , getKeys    = $.getKeys\n    , getSymbols = $.getSymbols\n    , isEnum     = $.isEnum;\n  while($$len > index){\n    var S      = IObject($$[index++])\n      , keys   = getSymbols ? getKeys(S).concat(getSymbols(S)) : getKeys(S)\n      , length = keys.length\n      , j      = 0\n      , key;\n    while(length > j)if(isEnum.call(S, key = keys[j++]))T[key] = S[key];\n  }\n  return T;\n} : Object.assign;","module.exports = function(regExp, replace){\n  var replacer = replace === Object(replace) ? function(part){\n    return replace[part];\n  } : replace;\n  return function(it){\n    return String(it).replace(regExp, replacer);\n  };\n};","var global = require('./$.global')\n  , SHARED = '__core-js_shared__'\n  , store  = global[SHARED] || (global[SHARED] = {});\nmodule.exports = function(key){\n  return store[key] || (store[key] = {});\n};","// 7.1.4 ToInteger\nvar ceil  = Math.ceil\n  , floor = Math.floor;\nmodule.exports = function(it){\n  return isNaN(it = +it) ? 0 : (it > 0 ? floor : ceil)(it);\n};","// 7.1.15 ToLength\nvar toInteger = require('./$.to-integer')\n  , min       = Math.min;\nmodule.exports = function(it){\n  return it > 0 ? min(toInteger(it), 0x1fffffffffffff) : 0; // pow(2, 53) - 1 == 9007199254740991\n};","// 7.1.13 ToObject(argument)\nvar defined = require('./$.defined');\nmodule.exports = function(it){\n  return Object(defined(it));\n};","var id = 0\n  , px = Math.random();\nmodule.exports = function(key){\n  return 'Symbol('.concat(key === undefined ? '' : key, ')_', (++id + px).toString(36));\n};","var store  = require('./$.shared')('wks')\n  , uid    = require('./$.uid')\n  , Symbol = require('./$.global').Symbol;\nmodule.exports = function(name){\n  return store[name] || (store[name] =\n    Symbol && Symbol[name] || (Symbol || uid)('Symbol.' + name));\n};","'use strict';\n// 22.1.3.8 Array.prototype.find(predicate, thisArg = undefined)\nvar $export = require('./$.export')\n  , $find   = require('./$.array-methods')(5)\n  , KEY     = 'find'\n  , forced  = true;\n// Shouldn't skip holes\nif(KEY in [])Array(1)[KEY](function(){ forced = false; });\n$export($export.P + $export.F * forced, 'Array', {\n  find: function find(callbackfn/*, that = undefined */){\n    return $find(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\nrequire('./$.add-to-unscopables')(KEY);","// 19.1.3.1 Object.assign(target, source)\nvar $export = require('./$.export');\n\n$export($export.S + $export.F, 'Object', {assign: require('./$.object-assign')});","// https://github.com/benjamingr/RexExp.escape\nvar $export = require('./$.export')\n  , $re     = require('./$.replacer')(/[\\\\^$*+?.()|[\\]{}]/g, '\\\\$&');\n\n$export($export.S, 'RegExp', {escape: function escape(it){ return $re(it); }});\n","module.exports = Date.now || now\n\nfunction now() {\n    return new Date().getTime()\n}\n","\n/**\n * Module dependencies.\n */\n\nvar now = require('date-now');\n\n/**\n * Returns a function, that, as long as it continues to be invoked, will not\n * be triggered. The function will be called after it stops being called for\n * N milliseconds. If `immediate` is passed, trigger the function on the\n * leading edge, instead of the trailing.\n *\n * @source underscore.js\n * @see http://unscriptable.com/2009/03/20/debouncing-javascript-methods/\n * @param {Function} function to wrap\n * @param {Number} timeout in ms (`100`)\n * @param {Boolean} whether to execute at the beginning (`false`)\n * @api public\n */\n\nmodule.exports = function debounce(func, wait, immediate){\n  var timeout, args, context, timestamp, result;\n  if (null == wait) wait = 100;\n\n  function later() {\n    var last = now() - timestamp;\n\n    if (last < wait && last > 0) {\n      timeout = setTimeout(later, wait - last);\n    } else {\n      timeout = null;\n      if (!immediate) {\n        result = func.apply(context, args);\n        if (!timeout) context = args = null;\n      }\n    }\n  };\n\n  return function debounced() {\n    context = this;\n    args = arguments;\n    timestamp = now();\n    var callNow = immediate && !timeout;\n    if (!timeout) timeout = setTimeout(later, wait);\n    if (callNow) {\n      result = func.apply(context, args);\n      context = args = null;\n    }\n\n    return result;\n  };\n};\n","(function (ELEMENT) {\n\tELEMENT.matches = ELEMENT.matches || ELEMENT.mozMatchesSelector || ELEMENT.msMatchesSelector || ELEMENT.oMatchesSelector || ELEMENT.webkitMatchesSelector;\n\n\tELEMENT.closest = ELEMENT.closest || function closest(selector) {\n\t\tvar element = this;\n\n\t\twhile (element) {\n\t\t\tif (element.matches(selector)) {\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\telement = element.parentElement;\n\t\t}\n\n\t\treturn element;\n\t};\n}(Element.prototype));\n","var Parser = require('./lib/parser')\n  , Resource = require('./lib/resource')\n  , validationFlag = false;\n\nmodule.exports = {\n\n  parse: function(unparsed) {\n    return new Parser().parse(unparsed, validationFlag);\n  },\n\n  enableValidation: function(flag) {\n    validationFlag = (flag != null) ? flag : true;\n  },\n\n  disableValidation: function() {\n    validationFlag = false;\n  },\n\n  Resource: Resource\n\n};\n","'use strict';\n\n/*\n * A very naive copy-on-write immutable stack. Since the size of the stack\n * is equal to the depth of the embedded resources for one HAL resource, the bad\n * performance for the copy-on-write approach is probably not a problem at all.\n * Might be replaced by a smarter solution later. Or not. Whatever.\n */\nfunction ImmutableStack() {\n  if (arguments.length >= 1) {\n    this._array = arguments[0];\n  } else {\n    this._array = [];\n  }\n}\n\nImmutableStack.prototype.array = function() {\n  return this._array;\n};\n\nImmutableStack.prototype.isEmpty = function(array) {\n  return this._array.length === 0;\n};\n\nImmutableStack.prototype.push = function(element) {\n  var array = this._array.slice(0);\n  array.push(element);\n  return new ImmutableStack(array);\n};\n\nImmutableStack.prototype.pop = function() {\n  var array = this._array.slice(0, this._array.length - 1);\n  return new ImmutableStack(array);\n};\n\nImmutableStack.prototype.peek = function() {\n  if (this.isEmpty()) {\n    throw new Error('can\\'t peek on empty stack');\n  }\n  return this._array[this._array.length - 1];\n};\n\nmodule.exports = ImmutableStack;\n","'use strict';\n\nvar Resource = require('./resource')\n  , Stack = require('./immutable_stack');\n\nvar linkSpec = {\n  href: { required: true, defaultValue: null },\n  templated: { required: false, defaultValue: false },\n  type: { required: false, defaultValue: null },\n  deprecation: { required: false, defaultValue: null },\n  name: { required: false, defaultValue: null },\n  profile: { required: false, defaultValue: null },\n  title: { required: false, defaultValue: null },\n  hreflang: { required: false, defaultValue: null }\n};\n\nfunction Parser() {\n}\n\nParser.prototype.parse = function parse(unparsed, validationFlag) {\n  var validation = validationFlag ? [] : null;\n  return _parse(unparsed, validation, new Stack());\n};\n\nfunction _parse(unparsed, validation, path) {\n  if (unparsed == null) {\n    return unparsed;\n  }\n  var allLinkArrays = parseLinks(unparsed._links, validation,\n      path.push('_links'));\n  var curies = parseCuries(allLinkArrays);\n  var allEmbeddedArrays = parseEmbeddedResourcess(unparsed._embedded,\n      validation, path.push('_embedded'));\n  var resource = new Resource(allLinkArrays, curies, allEmbeddedArrays,\n      validation);\n  copyNonHalProperties(unparsed, resource);\n  resource._original = unparsed;\n  return resource;\n}\n\nfunction parseLinks(links, validation, path) {\n  links = parseHalProperty(links, parseLink, validation, path);\n  if (links == null || links.self == null) {\n    // No links at all? Then it implictly misses the self link which it SHOULD\n    // have according to spec\n    reportValidationIssue('Resource does not have a self link', validation,\n        path);\n  }\n  return links;\n}\n\nfunction parseCuries(linkArrays) {\n  if (linkArrays) {\n    return linkArrays.curies;\n  } else {\n    return [];\n  }\n}\n\nfunction parseEmbeddedResourcess(original, parentValidation, path) {\n  var embedded = parseHalProperty(original, identity, parentValidation, path);\n  if (embedded == null) {\n    return embedded;\n  }\n  Object.keys(embedded).forEach(function(key) {\n    embedded[key] = embedded[key].map(function(embeddedElement) {\n      var childValidation = parentValidation != null ? [] : null;\n      var embeddedResource = _parse(embeddedElement, childValidation,\n          path.push(key));\n      embeddedResource._original = embeddedElement;\n      return embeddedResource;\n    });\n  });\n  return embedded;\n}\n\n/*\n * Copy over non-hal properties (everything that is not _links or _embedded)\n * to the parsed resource.\n */\nfunction copyNonHalProperties(unparsed, resource) {\n  Object.keys(unparsed).forEach(function(key) {\n    if (key !== '_links' && key !== '_embedded') {\n      resource[key] = unparsed[key];\n    }\n  });\n}\n\n/*\n * Processes one of the two main hal properties, that is _links or _embedded.\n * Each sub-property is turned into a single element array if it isn't already\n * an array. processingFunction is applied to each array element.\n */\nfunction parseHalProperty(property, processingFunction, validation, path) {\n  if (property == null) {\n    return property;\n  }\n\n  // create a shallow copy of the _links/_embedded object\n  var copy = {};\n\n  // normalize each link/each embedded object and put it into our copy\n  Object.keys(property).forEach(function(key) {\n    copy[key] = arrayfy(key, property[key], processingFunction,\n        validation, path);\n  });\n  return copy;\n}\n\nfunction arrayfy(key, object, fn, validation, path) {\n  if (isArray(object)) {\n    return object.map(function(element) {\n      return fn(key, element, validation, path);\n    });\n  } else {\n    return [fn(key, object, validation, path)];\n  }\n}\n\n\nfunction parseLink(linkKey, link, validation, path) {\n  if (!isObject(link)) {\n    throw new Error('Link object is not an actual object: ' + link +\n      ' [' + typeof link + ']');\n  }\n\n  // create a shallow copy of the link object\n  var copy = shallowCopy(link);\n\n  // add missing properties mandated by spec and do generic validation\n  Object.keys(linkSpec).forEach(function(key) {\n    if (copy[key] == null) {\n      if (linkSpec[key].required) {\n        reportValidationIssue('Link misses required property ' + key + '.',\n            validation, path.push(linkKey));\n      }\n      if (linkSpec[key].defaultValue != null) {\n        copy[key] = linkSpec[key].defaultValue;\n      }\n    }\n  });\n\n  // check more inter-property relations mandated by spec\n  if (copy.deprecation) {\n    log('Warning: Link ' + pathToString(path.push(linkKey)) +\n        ' is deprecated, see ' + copy.deprecation);\n  }\n  if (copy.templated !== true && copy.templated !== false) {\n    copy.templated = false;\n  }\n\n  if (!validation) {\n    return copy;\n  }\n  if (copy.href && copy.href.indexOf('{') >= 0 && !copy.templated) {\n    reportValidationIssue('Link seems to be an URI template ' +\n        'but its \"templated\" property is not set to true.', validation,\n        path.push(linkKey));\n  }\n  return copy;\n}\n\nfunction isArray(o) {\n  return Object.prototype.toString.call(o) === '[object Array]';\n}\n\nfunction isObject(o) {\n  return typeof o === 'object';\n}\n\nfunction identity(key, object) {\n  return object;\n}\n\nfunction reportValidationIssue(message, validation, path) {\n  if (validation) {\n    validation.push({\n      path: pathToString(path),\n      message: message\n    });\n  }\n}\n\n// TODO fix this ad hoc mess - does ie support console.log as of ie9?\nfunction log(message) {\n  if (typeof console !== 'undefined' && typeof console.log === 'function') {\n    console.log(message);\n  }\n}\n\nfunction shallowCopy(source) {\n  var copy = {};\n  Object.keys(source).forEach(function(key) {\n    copy[key] = source[key];\n  });\n  return copy;\n}\n\nfunction pathToString(path) {\n  var s = '$.';\n  for (var i = 0; i < path.array().length; i++) {\n    s += path.array()[i] + '.';\n  }\n  s = s.substring(0, s.length - 1);\n  return s;\n}\n\nmodule.exports = Parser;\n","'use strict';\n\nfunction Resource(links, curies, embedded, validationIssues) {\n  var self = this;\n  this._links = links || {};\n  this._initCuries(curies);\n  this._embedded = embedded || {};\n  this._validation = validationIssues || [];\n}\n\nResource.prototype._initCuries = function(curies) {\n  this._curiesMap = {};\n  if (!curies) {\n    this._curies = [];\n  } else {\n    this._curies = curies;\n    for (var i = 0; i < this._curies.length; i++) {\n      var curie = this._curies[i];\n      this._curiesMap[curie.name] = curie;\n    }\n  }\n  this._preResolveCuries();\n};\n\nResource.prototype._preResolveCuries = function() {\n  this._resolvedCuriesMap = {};\n  for (var i = 0; i < this._curies.length; i++) {\n    var curie = this._curies[i];\n    if (!curie.name) {\n      continue;\n    }\n    for (var rel in this._links) {\n      if (rel !== 'curies') {\n        this._preResolveCurie(curie, rel);\n      }\n    }\n  }\n};\n\nResource.prototype._preResolveCurie = function(curie, rel) {\n  var link = this._links[rel];\n  var prefixAndReference = rel.split(/:(.+)/);\n  var candidate = prefixAndReference[0];\n  if (curie.name === candidate) {\n    if (curie.templated && prefixAndReference.length >= 1) {\n      // TODO resolving templated CURIES should use a small uri template\n      // lib, not coded here ad hoc\n      var href = curie.href.replace(/(.*){(.*)}(.*)/, '$1' +\n          prefixAndReference[1] + '$3');\n      this._resolvedCuriesMap[href] = rel;\n    } else {\n      this._resolvedCuriesMap[curie.href] = rel;\n    }\n  }\n};\n\nResource.prototype.allLinkArrays = function() {\n  return this._links;\n};\n\nResource.prototype.linkArray = function(key) {\n  return propertyArray(this._links, key);\n};\n\nResource.prototype.link = function(key, index) {\n  return elementOfPropertyArray(this._links, key, index);\n};\n\nResource.prototype.hasCuries = function(key) {\n  return this._curies.length > 0;\n};\n\nResource.prototype.curieArray = function(key) {\n  return this._curies;\n};\n\nResource.prototype.curie = function(name) {\n  return this._curiesMap[name];\n};\n\nResource.prototype.reverseResolveCurie = function(fullUrl) {\n  return this._resolvedCuriesMap[fullUrl];\n};\n\nResource.prototype.allEmbeddedResourceArrays = function () {\n  return this._embedded;\n};\n\nResource.prototype.embeddedResourceArray = function(key) {\n  return propertyArray(this._embedded, key);\n};\n\nResource.prototype.embeddedResource = function(key, index) {\n  return elementOfPropertyArray(this._embedded, key, index);\n};\n\nResource.prototype.original = function() {\n  return this._original;\n};\n\nfunction propertyArray(object, key) {\n  return object != null ? object[key] : null;\n}\n\nfunction elementOfPropertyArray(object, key, index) {\n  index = index || 0;\n  var array = propertyArray(object, key);\n  if (array != null && array.length >= 1) {\n    return array[index];\n  }\n  return null;\n}\n\nResource.prototype.validationIssues = function() {\n  return this._validation;\n};\n\n// alias definitions\nResource.prototype.allLinks = Resource.prototype.allLinkArrays;\nResource.prototype.allEmbeddedArrays =\n    Resource.prototype.allEmbeddedResources =\n    Resource.prototype.allEmbeddedResourceArrays;\nResource.prototype.embeddedArray = Resource.prototype.embeddedResourceArray;\nResource.prototype.embedded = Resource.prototype.embeddedResource;\nResource.prototype.validation = Resource.prototype.validationIssues;\n\nmodule.exports = Resource;\n","module.exports=function(n){var t={},e=[];n=n||this,n.on=function(n,e,l){(t[n]=t[n]||[]).push([e,l])},n.off=function(n,l){n||(t={});for(var o=t[n]||e,i=o.length=l?o.length:0;i--;)l==o[i][0]&&o.splice(i,1)},n.emit=function(n){for(var l,o=t[n]||e,i=o.length>0?o.slice(0,o.length):o,c=0;l=i[c++];)l[0].apply(l[1],e.slice.call(arguments,1))}};"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset:utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJEOi9Qcm9qZWN0cy9UZWxlcG9ydC9zcmMvYXV0b2NvbXBsZXRlL2pzL2F1dG9jb21wbGV0ZS5qcyIsIm5vZGVfbW9kdWxlcy9jbGFzc2xpc3QtcG9seWZpbGwvc3JjL2luZGV4LmpzIiwibm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9mbi9hcnJheS9maW5kLmpzIiwibm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9mbi9vYmplY3QvYXNzaWduLmpzIiwibm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9mbi9yZWdleHAvZXNjYXBlLmpzIiwibm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9tb2R1bGVzLyQuYS1mdW5jdGlvbi5qcyIsIm5vZGVfbW9kdWxlcy9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy8kLmFkZC10by11bnNjb3BhYmxlcy5qcyIsIm5vZGVfbW9kdWxlcy9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy8kLmFycmF5LW1ldGhvZHMuanMiLCJub2RlX21vZHVsZXMvY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvJC5hcnJheS1zcGVjaWVzLWNyZWF0ZS5qcyIsIm5vZGVfbW9kdWxlcy9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy8kLmNvZi5qcyIsIm5vZGVfbW9kdWxlcy9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy8kLmNvcmUuanMiLCJub2RlX21vZHVsZXMvY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvJC5jdHguanMiLCJub2RlX21vZHVsZXMvY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvJC5kZWZpbmVkLmpzIiwibm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9tb2R1bGVzLyQuZXhwb3J0LmpzIiwibm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9tb2R1bGVzLyQuZmFpbHMuanMiLCJub2RlX21vZHVsZXMvY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvJC5nbG9iYWwuanMiLCJub2RlX21vZHVsZXMvY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvJC5pb2JqZWN0LmpzIiwibm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9tb2R1bGVzLyQuaXMtYXJyYXkuanMiLCJub2RlX21vZHVsZXMvY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvJC5pcy1vYmplY3QuanMiLCJub2RlX21vZHVsZXMvY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvJC5qcyIsIm5vZGVfbW9kdWxlcy9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy8kLm9iamVjdC1hc3NpZ24uanMiLCJub2RlX21vZHVsZXMvY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvJC5yZXBsYWNlci5qcyIsIm5vZGVfbW9kdWxlcy9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy8kLnNoYXJlZC5qcyIsIm5vZGVfbW9kdWxlcy9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy8kLnRvLWludGVnZXIuanMiLCJub2RlX21vZHVsZXMvY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvJC50by1sZW5ndGguanMiLCJub2RlX21vZHVsZXMvY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvJC50by1vYmplY3QuanMiLCJub2RlX21vZHVsZXMvY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvJC51aWQuanMiLCJub2RlX21vZHVsZXMvY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvJC53a3MuanMiLCJub2RlX21vZHVsZXMvY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvZXM2LmFycmF5LmZpbmQuanMiLCJub2RlX21vZHVsZXMvY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvZXM2Lm9iamVjdC5hc3NpZ24uanMiLCJub2RlX21vZHVsZXMvY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvZXM3LnJlZ2V4cC5lc2NhcGUuanMiLCJub2RlX21vZHVsZXMvZGF0ZS1ub3cvaW5kZXguanMiLCJub2RlX21vZHVsZXMvZGVib3VuY2UvaW5kZXguanMiLCJub2RlX21vZHVsZXMvZWxlbWVudC1jbG9zZXN0L2Nsb3Nlc3QuanMiLCJub2RlX21vZHVsZXMvaGFsZnJlZC9oYWxmcmVkLmpzIiwibm9kZV9tb2R1bGVzL2hhbGZyZWQvbGliL2ltbXV0YWJsZV9zdGFjay5qcyIsIm5vZGVfbW9kdWxlcy9oYWxmcmVkL2xpYi9wYXJzZXIuanMiLCJub2RlX21vZHVsZXMvaGFsZnJlZC9saWIvcmVzb3VyY2UuanMiLCJub2RlX21vZHVsZXMvbWluaXZlbnRzL2Rpc3QvbWluaXZlbnRzLmNvbW1vbmpzLm1pbi5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7OztRQ0FPLG9CQUFvQjs7UUFDcEIsaUJBQWlCOzt1QkFFSixTQUFTOzs7O3lCQUNWLFdBQVc7Ozs7MkNBRVgsa0NBQWtDOzs7O3dDQUNwQywrQkFBK0I7Ozs7MkNBQ3ZCLGtDQUFrQzs7Ozt3QkFDdEMsVUFBVTs7OztBQUUvQixJQUFNLEdBQUcsR0FBRyxFQUFFLElBQUksRUFBRSxDQUFDLEVBQUUsR0FBRyxFQUFFLENBQUMsRUFBRSxLQUFLLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsSUFBSSxFQUFFLEVBQUUsRUFBRSxDQUFDO0FBQzdELElBQU0sa0JBQWtCLEdBQUcsa0VBQWtFLENBQUM7QUFDOUYsSUFBTSxXQUFXLEdBQUcsY0FBYyxDQUFDO0FBQ25DLElBQU0sbUJBQW1CLEdBQUcsU0FBdEIsbUJBQW1CLENBQUcsSUFBSTtzQ0FBK0IsSUFBSTtDQUFPLENBQUM7QUFDM0UsSUFBTSxtQkFBbUIsR0FBRyxvREFBb0QsQ0FBQztBQUNqRixJQUFNLGtCQUFrQixHQUFHLG1FQUFtRSxDQUFDOzs7QUFHL0YsSUFBTSxhQUFhLEdBQUcsU0FBUyxVQUFVLENBQUMsSUFBSSxFQUFFO0FBQzlDLFNBQU8sSUFBSSxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7Q0FDckMsQ0FBQzs7O0FBR0YsV0FBVyxDQUFDLFNBQVMsQ0FBQyxFQUFFLEdBQUcsV0FBVyxDQUFDLFNBQVMsQ0FBQyxn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TyxJQUFJLG9CQUFvQixDQUFDLEdBQUcsQ0FBQyxDQUFDO0tBQ3RDOzs7U0FuRUcsb0JBQW9COzs7cUJBMFdYLG9CQUFvQjs7OztBQ3pZbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNqUEE7QUFDQTs7QUNEQTtBQUNBOztBQ0RBO0FBQ0E7O0FDREE7QUFDQTtBQUNBO0FBQ0E7O0FDSEE7O0FDQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDMUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2ZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDSkE7QUFDQTs7QUNEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ25CQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ0pBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzdDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNOQTtBQUNBO0FBQ0E7QUFDQTs7QUNIQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ0pBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDSkE7QUFDQTtBQUNBOztBQ0ZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ1pBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNoQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNQQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDTEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ0xBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNMQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ0pBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDSkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDTkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNiQTtBQUNBO0FBQ0E7QUFDQTs7QUNIQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDTEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ0xBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNyREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2pCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNyQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMzQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNoTkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMvSEEiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwiaW1wb3J0ICdjbGFzc2xpc3QtcG9seWZpbGwnO1xyXG5pbXBvcnQgJ2VsZW1lbnQtY2xvc2VzdCc7XHJcblxyXG5pbXBvcnQgaGFsZnJlZCBmcm9tICdoYWxmcmVkJztcclxuaW1wb3J0IGV2ZW50cyBmcm9tICdtaW5pdmVudHMnO1xyXG5cclxuaW1wb3J0IGFzc2lnbiBmcm9tICdjb3JlLWpzL2xpYnJhcnkvZm4vb2JqZWN0L2Fzc2lnbic7XHJcbmltcG9ydCBmaW5kIGZyb20gJ2NvcmUtanMvbGlicmFyeS9mbi9hcnJheS9maW5kJztcclxuaW1wb3J0IGVzY2FwZVJlZ2V4cCBmcm9tICdjb3JlLWpzL2xpYnJhcnkvZm4vcmVnZXhwL2VzY2FwZSc7XHJcbmltcG9ydCBkZWJvdW5jZSBmcm9tICdkZWJvdW5jZSc7XHJcblxyXG5jb25zdCBLZXkgPSB7IEJBQ0s6IDgsIFRBQjogOSwgRU5URVI6IDEzLCBVUDogMzgsIERPV046IDQwIH07XHJcbmNvbnN0IENPTlRBSU5FUl9URU1QTEFURSA9ICc8ZGl2IGNsYXNzPVwidHAtYXV0b2NvbXBsZXRlXCI+PHVsIGNsYXNzPVwidHAtYWNfX2xpc3RcIj48L3VsPjwvZGl2Pic7XHJcbmNvbnN0IElOUFVUX0NMQVNTID0gJ3RwLWFjX19pbnB1dCc7XHJcbmNvbnN0IGl0ZW1XcmFwcGVyVGVtcGxhdGUgPSBpdGVtID0+IGA8bGkgY2xhc3M9XCJ0cC1hY19faXRlbVwiPiR7aXRlbX08L2xpPmA7XHJcbmNvbnN0IE5PX1JFU1VMVFNfVEVNUExBVEUgPSAnPGxpIGNsYXNzPVwidHAtYWNfX2l0ZW0gbm8tcmVzdWx0c1wiPk5vIG1hdGNoZXM8L2xpPic7XHJcbmNvbnN0IEdFT0xPQ0FURV9URU1QTEFURSA9ICc8bGkgY2xhc3M9XCJ0cC1hY19faXRlbSBnZW9sb2NhdGVcIj5EZXRlY3QgbXkgY3VycmVudCBsb2NhdGlvbjwvbGk+JztcclxuXHJcbi8vIERlZmF1bHQgaXRlbSB0ZW1wbGF0ZSwgd3JhcHMgdGl0bGUgbWF0Y2hlc1xyXG5jb25zdCBJVEVNX1RFTVBMQVRFID0gZnVuY3Rpb24gcmVuZGVySXRlbShpdGVtKSB7XHJcbiAgcmV0dXJuIHRoaXMud3JhcE1hdGNoZXMoaXRlbS50aXRsZSk7XHJcbn07XHJcblxyXG4vLyBTaG9ydGhhbmRzXHJcbkhUTUxFbGVtZW50LnByb3RvdHlwZS5vbiA9IEhUTUxFbGVtZW50LnByb3RvdHlwZS5hZGRFdmVudExpc3RlbmVyO1xyXG5IVE1MRWxlbWVudC5wcm90b3R5cGUub2ZmID0gSFRNTEVsZW1lbnQucHJvdG90eXBlLnJlbW92ZUV2ZW50TGlzdGVuZXI7XHJcblxyXG5cclxuLyoqXHJcbiAqIFRlbGVwb3J0IENpdGllcyBBdXRvY29tcGxldGVcclxuICovXHJcbmNsYXNzIFRlbGVwb3J0QXV0b2NvbXBsZXRlIHtcclxuICBnZXQgcXVlcnkoKSB7IHJldHVybiB0aGlzLl9xdWVyeTsgfVxyXG4gIHNldCBxdWVyeShxdWVyeSkge1xyXG4gICAgaWYgKHF1ZXJ5ID09PSB0aGlzLl9xdWVyeSkgcmV0dXJuIHF1ZXJ5O1xyXG5cclxuICAgIHRoaXMuX3F1ZXJ5ID0gcXVlcnk7XHJcbiAgICB0aGlzLmVsLnZhbHVlID0gcXVlcnk7XHJcbiAgICB0aGlzLmVtaXQoJ3F1ZXJ5Y2hhbmdlJywgcXVlcnkpO1xyXG4gIH1cclxuXHJcbiAgZ2V0IGFjdGl2ZUluZGV4KCkgeyByZXR1cm4gdGhpcy5fYWN0aXZlSW5kZXg7IH1cclxuICBzZXQgYWN0aXZlSW5kZXgoaW5kZXgpIHtcclxuICAgIC8vIFJlbW92ZSBvbGQgaGlnaGxpZ2h0XHJcbiAgICBjb25zdCBvbGROb2RlID0gdGhpcy5saXN0LmNoaWxkTm9kZXNbdGhpcy5fYWN0aXZlSW5kZXhdO1xyXG4gICAgaWYgKG9sZE5vZGUpIG9sZE5vZGUuY2xhc3NMaXN0LnJlbW92ZSgnaXMtYWN0aXZlJyk7XHJcblxyXG4gICAgdGhpcy5fYWN0aXZlSW5kZXggPSBpbmRleDtcclxuXHJcbiAgICAvLyBTZXQgaGlnaGxpZ2h0XHJcbiAgICBjb25zdCBhY3RpdmVOb2RlID0gdGhpcy5saXN0LmNoaWxkTm9kZXNbaW5kZXhdO1xyXG4gICAgaWYgKGFjdGl2ZU5vZGUpIGFjdGl2ZU5vZGUuY2xhc3NMaXN0LmFkZCgnaXMtYWN0aXZlJyk7XHJcbiAgfVxyXG5cclxuICAvLyBTaG93IG9yIGhpZGUgbG9hZGluZ1xyXG4gIHNldCBsb2FkaW5nKHRvZ2dsZSkge1xyXG4gICAgdGhpcy5jb250YWluZXIuY2xhc3NMaXN0LnRvZ2dsZSgnc3Bpbm5lcicsIHRvZ2dsZSk7XHJcbiAgfVxyXG5cclxuXHJcbiAgLyoqXHJcbiAgICogUGFyc2UgYXJndW1lbnRzIGFuZCB3cmFwIGlucHV0XHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Ioe1xyXG4gICAgZWwgPSBudWxsLCB2YWx1ZSwgbWF4SXRlbXMgPSAxMCwgaXRlbVRlbXBsYXRlID0gSVRFTV9URU1QTEFURSxcclxuICAgIGdlb0xvY2F0ZSA9IHRydWUsIGFwaVJvb3QgPSAnaHR0cHM6Ly9hcGkudGVsZXBvcnQub3JnL2FwaScsIGFwaVZlcnNpb24gPSAxLFxyXG4gICAgZW1iZWRzID0gJ2NpdHk6Y291bnRyeSxjaXR5OmFkbWluMV9kaXZpc2lvbixjaXR5OnRpbWV6b25lL3R6Om9mZnNldHMtbm93LGNpdHk6dXJiYW5fYXJlYScsXHJcbiAgfSA9IHt9KSB7XHJcbiAgICBldmVudHModGhpcyk7XHJcblxyXG4gICAgY29uc3QgZWxlbSA9ICh0eXBlb2YgZWwgPT09ICdzdHJpbmcnKSA/IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoZWwpIDogZWw7XHJcbiAgICB0aGlzLnNldHVwSW5wdXQoZWxlbSk7XHJcblxyXG4gICAgYXNzaWduKHRoaXMsIHtcclxuICAgICAgbWF4SXRlbXMsIGdlb0xvY2F0ZSwgYXBpUm9vdCwgYXBpVmVyc2lvbiwgaXRlbVRlbXBsYXRlLCBlbWJlZHMsIHJlc3VsdHM6IFtdLFxyXG4gICAgICBfYWN0aXZlSW5kZXg6IDAsIF9jYWNoZToge30sIF9xdWVyeTogdGhpcy5lbC52YWx1ZSwgdmFsdWUsXHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyBQcmVmZXRjaCByZXN1bHRzXHJcbiAgICBpZiAodGhpcy52YWx1ZSAmJiB0aGlzLnZhbHVlLnRpdGxlKSB7XHJcbiAgICAgIHRoaXMucXVlcnkgPSB0aGlzLnZhbHVlLnRpdGxlO1xyXG4gICAgfSBlbHNlIGlmICh0aGlzLnF1ZXJ5KSB7XHJcbiAgICAgIHRoaXMuZmV0Y2hSZXN1bHRzKCgpID0+IHtcclxuICAgICAgICB0aGlzLnZhbHVlID0gdGhpcy5nZXRSZXN1bHRCeVRpdGxlKHRoaXMucXVlcnkpO1xyXG4gICAgICAgIHRoaXMuZW1pdCgnY2hhbmdlJywgdGhpcy52YWx1ZSk7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuZ2V0Q2l0aWVzID0gZGVib3VuY2UodGhpcy5nZXRDaXRpZXMsIDIwMCk7XHJcbiAgICByZXR1cm4gdGhpcztcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEluaXQgc2hvcnRoYW5kXHJcbiAgICovXHJcbiAgc3RhdGljIGluaXQoZWwsIG9wdGlvbnMgPSB7fSkge1xyXG4gICAgY29uc3Qgb3B0ID0gKHR5cGVvZiBlbCA9PT0gJ3N0cmluZycgfHwgZWwgaW5zdGFuY2VvZiBIVE1MSW5wdXRFbGVtZW50KSA/IGFzc2lnbihvcHRpb25zLCB7IGVsIH0pIDogZWw7XHJcbiAgICByZXR1cm4gbmV3IFRlbGVwb3J0QXV0b2NvbXBsZXRlKG9wdCk7XHJcbiAgfVxyXG5cclxuXHJcbiAgLyoqXHJcbiAgICogQ2xlYW4gdXAgdGhlIGNvbnRhaW5lclxyXG4gICAqL1xyXG4gIGRlc3Ryb3koKSB7XHJcbiAgICB0aGlzLmVsLm9mZignaW5wdXQnLCB0aGlzLm9uaW5wdXQpO1xyXG4gICAgdGhpcy5lbC5vZmYoJ2tleWRvd24nLCB0aGlzLm9ua2V5ZG93bik7XHJcbiAgICB0aGlzLmVsLm9mZignZm9jdXMnLCB0aGlzLm9uZm9jdXMpO1xyXG4gICAgdGhpcy5lbC5vZmYoJ2JsdXInLCB0aGlzLm9uYmx1cik7XHJcbiAgICB0aGlzLmVsLm9mZignY2xpY2snLCB0aGlzLm9uY2xpY2spO1xyXG5cclxuICAgIHRoaXMuZWwuY2xhc3NMaXN0LnJlbW92ZShJTlBVVF9DTEFTUyk7XHJcblxyXG4gICAgY29uc3QgY29udGFpbmVyUGFyZW50ID0gdGhpcy5jb250YWluZXIucGFyZW50Tm9kZTtcclxuICAgIGNvbnRhaW5lclBhcmVudC5yZXBsYWNlQ2hpbGQodGhpcy5lbC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMuZWwpLCB0aGlzLmNvbnRhaW5lcik7XHJcbiAgfVxyXG5cclxuXHJcbiAgLyoqXHJcbiAgICogQ2xlYXIgdGhlIHNlbGVjdGVkIHZhbHVlXHJcbiAgICovXHJcbiAgY2xlYXIoKSB7XHJcbiAgICB0aGlzLnJlc3VsdHMgPSBbXTtcclxuICAgIHRoaXMuc2VsZWN0QnlJbmRleCgwKTtcclxuICB9XHJcblxyXG5cclxuICAvKipcclxuICAgKiBXcmFwIGlucHV0IG5vZGUgaW4gY29udGFpbmVyXHJcbiAgICovXHJcbiAgc2V0dXBJbnB1dChlbCkge1xyXG4gICAgaWYgKCFlbCB8fCAhKGVsIGluc3RhbmNlb2YgSFRNTElucHV0RWxlbWVudCkpIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBlbGVtZW50IGdpdmVuJyk7XHJcblxyXG4gICAgZWwuaW5zZXJ0QWRqYWNlbnRIVE1MKCdiZWZvcmViZWdpbicsIENPTlRBSU5FUl9URU1QTEFURSk7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgJ2NvbnRhaW5lcicsIHsgdmFsdWU6IGVsLnByZXZpb3VzU2libGluZyB9KTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCAnbGlzdCcsIHsgdmFsdWU6IHRoaXMuY29udGFpbmVyLmZpcnN0Q2hpbGQgfSk7XHJcblxyXG4gICAgY29uc3QgaW5wdXQgPSB0aGlzLmNvbnRhaW5lci5pbnNlcnRCZWZvcmUoZWwucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChlbCksIHRoaXMubGlzdCk7XHJcbiAgICBpbnB1dC5jbGFzc0xpc3QuYWRkKElOUFVUX0NMQVNTKTtcclxuXHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgJ2VsJywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogaW5wdXQgfSk7XHJcblxyXG4gICAgdGhpcy5lbC5vbignaW5wdXQnLCB0aGlzLm9uaW5wdXQuYmluZCh0aGlzKSk7XHJcbiAgICB0aGlzLmVsLm9uKCdrZXlkb3duJywgdGhpcy5vbmtleWRvd24uYmluZCh0aGlzKSk7XHJcbiAgICB0aGlzLmVsLm9uKCdmb2N1cycsIHRoaXMub25mb2N1cy5iaW5kKHRoaXMpKTtcclxuICAgIHRoaXMuZWwub24oJ2JsdXInLCB0aGlzLm9uYmx1ci5iaW5kKHRoaXMpKTtcclxuICAgIHRoaXMuZWwub24oJ2NsaWNrJywgdGhpcy5vbmNsaWNrLmJpbmQodGhpcykpO1xyXG5cclxuICAgIHRoaXMubGlzdC5vbignbW91c2Vkb3duJywgdGhpcy5vbmxpc3RjbGljay5iaW5kKHRoaXMpKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEV2ZW50IGhhbmRsZXJzXHJcbiAgICovXHJcblxyXG4gIC8vIENsaWNrZWQgb24gbGlzdCBpdGVtLCBzZWxlY3QgaXRlbVxyXG4gIG9ubGlzdGNsaWNrKGV2ZW50KSB7XHJcbiAgICBjb25zdCBpbmRleCA9IFtdLmluZGV4T2YuY2FsbCh0aGlzLmxpc3QuY2hpbGRyZW4sIGV2ZW50LnRhcmdldC5jbG9zZXN0KCcudHAtYWNfX2l0ZW0nKSk7XHJcbiAgICB0aGlzLnNlbGVjdEJ5SW5kZXgoaW5kZXgpO1xyXG4gIH1cclxuXHJcbiAgLy8gU2VsZWN0IHRleHQgb24gY2xpY2tcclxuICBvbmNsaWNrKCkgeyB0aGlzLmVsLnNlbGVjdCgpOyB9XHJcblxyXG4gIC8vIElucHV0IGhhcyBmb2N1cywgb3BlbiBsaXN0XHJcbiAgb25mb2N1cygpIHsgdGhpcy5yZW5kZXJMaXN0KCk7IH1cclxuXHJcbiAgLy8gSW5wdXQgbG9zdCBmb2N1cywgY2xvc2UgbGlzdFxyXG4gIG9uYmx1cigpIHsgdGhpcy5saXN0LmlubmVySFRNTCA9ICcnOyB9XHJcblxyXG4gIC8vIElucHV0IHdhcyB0eXBlZCBpbnRvXHJcbiAgb25pbnB1dCgpIHtcclxuICAgIHRoaXMuX3F1ZXJ5ID0gdGhpcy5lbC52YWx1ZTtcclxuICAgIHRoaXMuZmV0Y2hSZXN1bHRzKCgpID0+IHRoaXMucmVuZGVyTGlzdCgpKTtcclxuICB9XHJcblxyXG4gIC8vIENhbGxlZCBvbiBrZXlwcmVzc2VzXHJcbiAgb25rZXlkb3duKGV2ZW50KSB7XHJcbiAgICBjb25zdCBjb2RlID0gZXZlbnQua2V5Q29kZTtcclxuXHJcbiAgICAvLyBQcmV2ZW50IGN1cnNvciBtb3ZlXHJcbiAgICBpZiAoW0tleS5VUCwgS2V5LkRPV05dLmluZGV4T2YoY29kZSkgIT09IC0xKSBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuICAgIHN3aXRjaCAoY29kZSkge1xyXG4gICAgY2FzZSBLZXkuQkFDSzpcclxuICAgICAgLy8gQ2xlYXIgZmlsbGVkIHZhbHVlIG9yIGxhc3QgY2hhclxyXG4gICAgICBpZiAodGhpcy52YWx1ZSB8fCB0aGlzLnF1ZXJ5Lmxlbmd0aCA9PT0gMSkgdGhpcy5jbGVhcigpO1xyXG4gICAgICBicmVhaztcclxuICAgIGNhc2UgS2V5LkVOVEVSOlxyXG4gICAgICAvLyBQcmV2ZW50IHN1Ym1pdCBpZiBxdWVyeSBpcyB0byBiZSBzZWxlY3RlZFxyXG4gICAgICBpZiAoIXRoaXMudmFsdWUgJiYgdGhpcy5xdWVyeSkgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgdGhpcy5zZWxlY3RCeUluZGV4KHRoaXMuYWN0aXZlSW5kZXgpO1xyXG4gICAgICBicmVhaztcclxuICAgIGNhc2UgS2V5LlRBQjogaWYgKCF0aGlzLnZhbHVlKSB0aGlzLnNlbGVjdEJ5SW5kZXgodGhpcy5hY3RpdmVJbmRleCk7XHJcbiAgICAgIGJyZWFrO1xyXG4gICAgY2FzZSBLZXkuVVA6IHRoaXMuYWN0aXZlSW5kZXggPSBNYXRoLm1heCgwLCB0aGlzLmFjdGl2ZUluZGV4IC0gMSk7XHJcbiAgICAgIGJyZWFrO1xyXG4gICAgY2FzZSBLZXkuRE9XTjogdGhpcy5hY3RpdmVJbmRleCA9IE1hdGgubWluKHRoaXMucmVzdWx0cy5sZW5ndGggLSAxLCB0aGlzLmFjdGl2ZUluZGV4ICsgMSk7XHJcbiAgICAgIGJyZWFrO1xyXG4gICAgfVxyXG4gIH1cclxuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcblxyXG4gIC8qKlxyXG4gICAqIFNlbGVjdCBvcHRpb24gZnJvbSBsaXN0IGJ5IGluZGV4XHJcbiAgICovXHJcbiAgc2VsZWN0QnlJbmRleChpbmRleCkge1xyXG4gICAgdGhpcy5hY3RpdmVJbmRleCA9IGluZGV4O1xyXG4gICAgY29uc3Qgb2xkVmFsdWUgPSB0aGlzLnZhbHVlO1xyXG4gICAgdGhpcy52YWx1ZSA9IHRoaXMucmVzdWx0c1tpbmRleF0gfHwgbnVsbDtcclxuXHJcbiAgICBjb25zdCBpc0dlb2xvY2F0ZSA9IHRoaXMubGlzdC5maXJzdENoaWxkICYmIHRoaXMubGlzdC5maXJzdENoaWxkLmNsYXNzTGlzdC5jb250YWlucygnZ2VvbG9jYXRlJyk7XHJcbiAgICBpZiAoaXNHZW9sb2NhdGUpIHRoaXMuY3VycmVudExvY2F0aW9uKCk7XHJcblxyXG4gICAgaWYgKG9sZFZhbHVlICE9PSB0aGlzLnZhbHVlICYmICFpc0dlb2xvY2F0ZSkgdGhpcy5lbWl0KCdjaGFuZ2UnLCB0aGlzLnZhbHVlKTtcclxuXHJcbiAgICB0aGlzLmxpc3QuaW5uZXJIVE1MID0gJyc7XHJcbiAgICB0aGlzLnF1ZXJ5ID0gdGhpcy52YWx1ZSA/IHRoaXMudmFsdWUudGl0bGUgOiAnJztcclxuICB9XHJcblxyXG5cclxuICAvKipcclxuICAgKiBXcmFwIG1hdGNoaW5nIHJlc3VsdCBuYW1lcyBpbiA8c3Bhbj5zXHJcbiAgICovXHJcbiAgd3JhcE1hdGNoZXMoc3RyID0gJycpIHtcclxuICAgIGxldCByZXMgPSBzdHI7XHJcblxyXG4gICAgdGhpcy5xdWVyeVxyXG4gICAgICAuc3BsaXQoL1tcXCxcXHNdKy8pXHJcbiAgICAgIC5maWx0ZXIocXIgPT4gISFxcilcclxuICAgICAgLmZvckVhY2gocXVlcnkgPT4ge1xyXG4gICAgICAgIGNvbnN0IG1hdGNoZXIgPSBuZXcgUmVnRXhwKGVzY2FwZVJlZ2V4cChxdWVyeSkgKyAnKD8hW148XSo+fFtePD5dKjxcXC8pJywgJ2dpJyk7XHJcbiAgICAgICAgcmVzID0gcmVzLnJlcGxhY2UobWF0Y2hlciwgJzxzcGFuPiQmPC9zcGFuPicpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICByZXR1cm4gcmVzO1xyXG4gIH1cclxuXHJcblxyXG4gIC8qKlxyXG4gICAqIFJlbmRlciByZXN1bHQgbGlzdFxyXG4gICAqL1xyXG4gIHJlbmRlckxpc3QoeyBnZW9Mb2NhdGUgPSB0aGlzLmdlb0xvY2F0ZSB9ID0ge30pIHtcclxuICAgIGxldCByZXN1bHRzID0gdGhpcy5yZXN1bHRzLm1hcChyZXMgPT5cclxuICAgICAgaXRlbVdyYXBwZXJUZW1wbGF0ZSh0aGlzLml0ZW1UZW1wbGF0ZShyZXMpKSlcclxuICAgICAgLnNsaWNlKDAsIHRoaXMubWF4SXRlbXMpLmpvaW4oJycpO1xyXG5cclxuICAgIGlmICghcmVzdWx0cyAmJiB0aGlzLnF1ZXJ5ICE9PSAnJyAmJiAhdGhpcy52YWx1ZSkgcmVzdWx0cyA9IE5PX1JFU1VMVFNfVEVNUExBVEU7XHJcbiAgICBpZiAodGhpcy5xdWVyeSA9PT0gJycgJiYgZ2VvTG9jYXRlKSByZXN1bHRzID0gR0VPTE9DQVRFX1RFTVBMQVRFO1xyXG4gICAgdGhpcy5saXN0LmlubmVySFRNTCA9IHJlc3VsdHM7XHJcblxyXG4gICAgdGhpcy5hY3RpdmVJbmRleCA9IDA7XHJcbiAgfVxyXG5cclxuXHJcbiAgLyoqXHJcbiAgICogRmV0Y2ggdmFsdWUgZnJvbSByZXN1bHRzIGJ5IHRpdGxlXHJcbiAgICovXHJcbiAgZ2V0UmVzdWx0QnlUaXRsZSh0aXRsZSkge1xyXG4gICAgaWYgKCF0aGlzLnJlc3VsdHMgfHwgIXRpdGxlKSByZXR1cm4gbnVsbDtcclxuICAgIHJldHVybiBmaW5kKHRoaXMucmVzdWx0cywgcmVzID0+IHJlcy50aXRsZS5pbmRleE9mKHRpdGxlKSAhPT0gLTEpO1xyXG4gIH1cclxuXHJcblxyXG4gIC8qKlxyXG4gICAqIEZldGNoIHBpY2tlciBkYXRhIGZyb20gY2FjaGUgb3IgQVBJXHJcbiAgICovXHJcbiAgZmV0Y2hSZXN1bHRzKGNiID0gZnVuY3Rpb24gbm9vcCgpIHt9KSB7XHJcbiAgICAvLyBDYW5jZWwgb2xkIHJlcXVlc3RcclxuICAgIGlmICh0aGlzLnJlcSkgdGhpcy5yZXEuYWJvcnQoKTtcclxuXHJcbiAgICBjb25zdCBjYWNoZWQgPSB0aGlzLl9jYWNoZVt0aGlzLnF1ZXJ5XTtcclxuICAgIGlmIChjYWNoZWQpIHtcclxuICAgICAgdGhpcy5yZXN1bHRzID0gY2FjaGVkO1xyXG4gICAgICByZXR1cm4gY2IoKTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLnJlcSA9IHRoaXMuZ2V0Q2l0aWVzKHJlc3VsdHMgPT4ge1xyXG4gICAgICB0aGlzLnJlc3VsdHMgPSB0aGlzLl9jYWNoZVt0aGlzLnF1ZXJ5XSA9IHJlc3VsdHM7XHJcbiAgICAgIGNiKCk7XHJcbiAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlO1xyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5sb2FkaW5nID0gdHJ1ZTtcclxuICB9XHJcblxyXG5cclxuICAvKipcclxuICAgKiBHZW9sb2NhdGUgY3VycmVudCBjaXR5XHJcbiAgICovXHJcbiAgY3VycmVudExvY2F0aW9uKCkge1xyXG4gICAgY29uc3QgcmVxID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XHJcbiAgICBjb25zdCBlbWJlZCA9IGBsb2NhdGlvbjpuZWFyZXN0LWNpdGllcy9sb2NhdGlvbjpuZWFyZXN0LWNpdHkvJHt0aGlzLmVtYmVkcyA/IGB7JHt0aGlzLmVtYmVkc319YCA6ICcnfWA7XHJcblxyXG4gICAgdGhpcy5sb2FkaW5nID0gdHJ1ZTtcclxuICAgIHRoaXMub2xkUGxhY2Vob2xkZXIgPSB0aGlzLmVsLnBsYWNlaG9sZGVyO1xyXG4gICAgdGhpcy5lbC5wbGFjZWhvbGRlciA9ICdEZXRlY3RpbmcgbG9jYXRpb24uLi4nO1xyXG5cclxuICAgIG5hdmlnYXRvci5nZW9sb2NhdGlvbi5nZXRDdXJyZW50UG9zaXRpb24oKHsgY29vcmRzIH0pID0+IHtcclxuICAgICAgcmVxLm9wZW4oJ0dFVCcsIGAke3RoaXMuYXBpUm9vdH0vbG9jYXRpb25zLyR7Y29vcmRzLmxhdGl0dWRlfSwke2Nvb3Jkcy5sb25naXR1ZGV9Lz9lbWJlZD0ke2VtYmVkfWApO1xyXG4gICAgICByZXEuc2V0UmVxdWVzdEhlYWRlcignQWNjZXB0JywgYGFwcGxpY2F0aW9uL3ZuZC50ZWxlcG9ydC52JHt0aGlzLmFwaVZlcnNpb259K2pzb25gKTtcclxuICAgICAgcmVxLmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCAoKSA9PiB0aGlzLnBhcnNlTG9jYXRpb24oSlNPTi5wYXJzZShyZXEucmVzcG9uc2UpKSk7XHJcbiAgICAgIHJlcS5zZW5kKCk7XHJcbiAgICB9LCAoeyBtZXNzYWdlIH0pID0+IHtcclxuICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7XHJcbiAgICAgIHRoaXMuZWwucGxhY2Vob2xkZXIgPSBtZXNzYWdlO1xyXG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHRoaXMuZWwucGxhY2Vob2xkZXIgPSB0aGlzLm9sZFBsYWNlaG9sZGVyLCAzMDAwKTtcclxuICAgIH0sIHsgdGltZW91dDogNTAwMCB9KTtcclxuICB9XHJcblxyXG5cclxuICAvKipcclxuICAgKiBQYXJzZSBjdXJyZW50IGxvY2F0aW9uIEFQSSByZXNwb25zZVxyXG4gICAqL1xyXG4gIHBhcnNlTG9jYXRpb24oanNvbikge1xyXG4gICAgY29uc3QgcmVzID0gaGFsZnJlZC5wYXJzZShqc29uKTtcclxuICAgIGNvbnN0IG5lYXJlc3QgPSByZXMuZW1iZWRkZWRBcnJheSgnbG9jYXRpb246bmVhcmVzdC1jaXRpZXMnKVswXTtcclxuICAgIGlmIChuZWFyZXN0KSB7XHJcbiAgICAgIHRoaXMucmVzdWx0cyA9IFt0aGlzLnBhcnNlQ2l0eShuZWFyZXN0KV07XHJcbiAgICAgIGlmICh0aGlzLmdlb0xvY2F0ZSA9PT0gJ25vcGljaycpIHtcclxuICAgICAgICB0aGlzLmVsLmZvY3VzKCk7XHJcbiAgICAgICAgdGhpcy5yZW5kZXJMaXN0KHsgZ2VvTG9jYXRlOiBmYWxzZSB9KTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB0aGlzLnNlbGVjdEJ5SW5kZXgoMCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHRoaXMubG9hZGluZyA9IGZhbHNlO1xyXG4gICAgdGhpcy5lbC5wbGFjZWhvbGRlciA9IHRoaXMub2xkUGxhY2Vob2xkZXI7XHJcbiAgfVxyXG5cclxuXHJcbiAgLyoqXHJcbiAgICogTWFrZSB0aGUgQVBJIGNhbGxcclxuICAgKi9cclxuICBnZXRDaXRpZXMoY2IpIHtcclxuICAgIGlmICghdGhpcy5xdWVyeSkgcmV0dXJuIGNiKFtdKTtcclxuICAgIGNvbnN0IGVtYmVkID0gYGNpdHk6c2VhcmNoLXJlc3VsdHMvY2l0eTppdGVtLyR7dGhpcy5lbWJlZHMgPyBgeyR7dGhpcy5lbWJlZHN9fWAgOiAnJ31gO1xyXG5cclxuICAgIGNvbnN0IHJlcSA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xyXG4gICAgY29uc3QgcXVlcnkgPSBlbmNvZGVVUklDb21wb25lbnQodGhpcy5xdWVyeSk7XHJcbiAgICByZXEub3BlbignR0VUJywgYCR7dGhpcy5hcGlSb290fS9jaXRpZXMvP3NlYXJjaD0ke3F1ZXJ5fSZlbWJlZD0ke2VtYmVkfSZsaW1pdD0ke3RoaXMubWF4SXRlbXN9YCk7XHJcbiAgICByZXEuc2V0UmVxdWVzdEhlYWRlcignQWNjZXB0JywgYGFwcGxpY2F0aW9uL3ZuZC50ZWxlcG9ydC52JHt0aGlzLmFwaVZlcnNpb259K2pzb25gKTtcclxuICAgIHJlcS5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgKCkgPT4ge1xyXG4gICAgICBjb25zdCByZXN1bHRzID0gaGFsZnJlZC5wYXJzZShKU09OLnBhcnNlKHJlcS5yZXNwb25zZSkpXHJcbiAgICAgICAgLmVtYmVkZGVkQXJyYXkoJ2NpdHk6c2VhcmNoLXJlc3VsdHMnKVxyXG4gICAgICAgIC5tYXAocmVzID0+IHRoaXMucGFyc2VDaXR5KHJlcykpO1xyXG5cclxuICAgICAgY2IocmVzdWx0cyk7XHJcbiAgICB9KTtcclxuICAgIHJlcS5zZW5kKCk7XHJcblxyXG4gICAgcmV0dXJuIHJlcTtcclxuICB9XHJcblxyXG5cclxuICAvKipcclxuICAgKiBQYXJzZSBjaXR5XHJcbiAgICovXHJcbiAgcGFyc2VDaXR5KHJlcykge1xyXG4gICAgY29uc3QgY2l0eSA9IHJlcy5lbWJlZGRlZCgnbG9jYXRpb246bmVhcmVzdC1jaXR5JykgfHwgcmVzLmVtYmVkZGVkKCdjaXR5Oml0ZW0nKTtcclxuICAgIGNpdHkuY291bnRyeSA9IGNpdHkuZW1iZWRkZWQoJ2NpdHk6Y291bnRyeScpO1xyXG4gICAgY2l0eS5hZG1pbjFfZGl2aXNpb24gPSBjaXR5LmVtYmVkZGVkKCdjaXR5OmFkbWluMV9kaXZpc2lvbicpO1xyXG4gICAgY2l0eS50aW1lem9uZSA9IGNpdHkuZW1iZWRkZWQoJ2NpdHk6dGltZXpvbmUnKTtcclxuICAgIGNpdHkudXJiYW5fYXJlYSA9IGNpdHkuZW1iZWRkZWQoJ2NpdHk6dXJiYW5fYXJlYScpO1xyXG5cclxuICAgIGNvbnN0IHsgZnVsbF9uYW1lOiBmdWxsTmFtZSwgbmFtZSwgZ2VvbmFtZV9pZDogZ2VvbmFtZUlkLCBwb3B1bGF0aW9uLFxyXG4gICAgICBsb2NhdGlvbjogeyBsYXRsb246IHsgbGF0aXR1ZGUsIGxvbmdpdHVkZSB9IH0gfSA9IGNpdHk7XHJcblxyXG4gICAgY29uc3QgeyBtYXRjaGluZ19mdWxsX25hbWU6IHRpdGxlID0gZnVsbE5hbWUgfSA9IHJlcztcclxuXHJcbiAgICBjb25zdCByZXN1bHQgPSB7IHRpdGxlLCBuYW1lLCBnZW9uYW1lSWQsIGxhdGl0dWRlLCBsb25naXR1ZGUsIHBvcHVsYXRpb24gfTtcclxuXHJcbiAgICBpZiAoY2l0eS5jb3VudHJ5KSBhc3NpZ24ocmVzdWx0LCB7IGNvdW50cnk6IGNpdHkuY291bnRyeS5uYW1lIH0pO1xyXG4gICAgaWYgKGNpdHkuYWRtaW4xX2RpdmlzaW9uKSB7XHJcbiAgICAgIGNvbnN0IHsgbmFtZTogYWRtaW4xRGl2aXNpb24sIGdlb25hbWVzX2FkbWluMV9jb2RlOiBhZG1pbjFEaXZpc2lvbkNvZGUgfSA9IGNpdHkuYWRtaW4xX2RpdmlzaW9uO1xyXG4gICAgICBhc3NpZ24ocmVzdWx0LCB7IGFkbWluMURpdmlzaW9uLCBhZG1pbjFEaXZpc2lvbkNvZGUgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGNpdHkudGltZXpvbmUpIHtcclxuICAgICAgY29uc3QgdHpOb3cgPSBjaXR5LnRpbWV6b25lLmVtYmVkZGVkKCd0ejpvZmZzZXRzLW5vdycpO1xyXG4gICAgICBhc3NpZ24ocmVzdWx0LCB7IHR6T2Zmc2V0TWludXRlczogdHpOb3cudG90YWxfb2Zmc2V0X21pbiB9KTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoY2l0eS51cmJhbl9hcmVhKSB7XHJcbiAgICAgIGNvbnN0IHsgc2x1ZzogdWFTbHVnLCBuYW1lOiB1YU5hbWUsIHVhX2lkOiB1YUlkLCB0ZWxlcG9ydF9jaXR5X3VybDogdWFDaXR5VXJsIH0gPSBjaXR5LnVyYmFuX2FyZWE7XHJcbiAgICAgIGFzc2lnbihyZXN1bHQsIHsgdWFOYW1lLCB1YUlkLCB1YUNpdHlVcmwsIHVhU2x1ZyB9KTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgVGVsZXBvcnRBdXRvY29tcGxldGU7XHJcbiIsIi8qXG4gKiBjbGFzc0xpc3QuanM6IENyb3NzLWJyb3dzZXIgZnVsbCBlbGVtZW50LmNsYXNzTGlzdCBpbXBsZW1lbnRhdGlvbi5cbiAqIDIwMTQtMDctMjNcbiAqXG4gKiBCeSBFbGkgR3JleSwgaHR0cDovL2VsaWdyZXkuY29tXG4gKiBQdWJsaWMgRG9tYWluLlxuICogTk8gV0FSUkFOVFkgRVhQUkVTU0VEIE9SIElNUExJRUQuIFVTRSBBVCBZT1VSIE9XTiBSSVNLLlxuICovXG5cbi8qZ2xvYmFsIHNlbGYsIGRvY3VtZW50LCBET01FeGNlcHRpb24gKi9cblxuLyohIEBzb3VyY2UgaHR0cDovL3B1cmwuZWxpZ3JleS5jb20vZ2l0aHViL2NsYXNzTGlzdC5qcy9ibG9iL21hc3Rlci9jbGFzc0xpc3QuanMqL1xuXG4vKiBDb3BpZWQgZnJvbSBNRE46XG4gKiBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvRWxlbWVudC9jbGFzc0xpc3RcbiAqL1xuXG5pZiAoXCJkb2N1bWVudFwiIGluIHdpbmRvdy5zZWxmKSB7XG5cbiAgLy8gRnVsbCBwb2x5ZmlsbCBmb3IgYnJvd3NlcnMgd2l0aCBubyBjbGFzc0xpc3Qgc3VwcG9ydFxuICAvLyBJbmNsdWRpbmcgSUUgPCBFZGdlIG1pc3NpbmcgU1ZHRWxlbWVudC5jbGFzc0xpc3RcbiAgaWYgKCEoXCJjbGFzc0xpc3RcIiBpbiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiX1wiKSlcbiAgICB8fCBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMgJiYgIShcImNsYXNzTGlzdFwiIGluIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIsXCJnXCIpKSkge1xuXG4gIChmdW5jdGlvbiAodmlldykge1xuXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgICBpZiAoISgnRWxlbWVudCcgaW4gdmlldykpIHJldHVybjtcblxuICAgIHZhclxuICAgICAgICBjbGFzc0xpc3RQcm9wID0gXCJjbGFzc0xpc3RcIlxuICAgICAgLCBwcm90b1Byb3AgPSBcInByb3RvdHlwZVwiXG4gICAgICAsIGVsZW1DdHJQcm90byA9IHZpZXcuRWxlbWVudFtwcm90b1Byb3BdXG4gICAgICAsIG9iakN0ciA9IE9iamVjdFxuICAgICAgLCBzdHJUcmltID0gU3RyaW5nW3Byb3RvUHJvcF0udHJpbSB8fCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlcGxhY2UoL15cXHMrfFxccyskL2csIFwiXCIpO1xuICAgICAgfVxuICAgICAgLCBhcnJJbmRleE9mID0gQXJyYXlbcHJvdG9Qcm9wXS5pbmRleE9mIHx8IGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgIHZhclxuICAgICAgICAgICAgaSA9IDBcbiAgICAgICAgICAsIGxlbiA9IHRoaXMubGVuZ3RoXG4gICAgICAgIDtcbiAgICAgICAgZm9yICg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgIGlmIChpIGluIHRoaXMgJiYgdGhpc1tpXSA9PT0gaXRlbSkge1xuICAgICAgICAgICAgcmV0dXJuIGk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiAtMTtcbiAgICAgIH1cbiAgICAgIC8vIFZlbmRvcnM6IHBsZWFzZSBhbGxvdyBjb250ZW50IGNvZGUgdG8gaW5zdGFudGlhdGUgRE9NRXhjZXB0aW9uc1xuICAgICAgLCBET01FeCA9IGZ1bmN0aW9uICh0eXBlLCBtZXNzYWdlKSB7XG4gICAgICAgIHRoaXMubmFtZSA9IHR5cGU7XG4gICAgICAgIHRoaXMuY29kZSA9IERPTUV4Y2VwdGlvblt0eXBlXTtcbiAgICAgICAgdGhpcy5tZXNzYWdlID0gbWVzc2FnZTtcbiAgICAgIH1cbiAgICAgICwgY2hlY2tUb2tlbkFuZEdldEluZGV4ID0gZnVuY3Rpb24gKGNsYXNzTGlzdCwgdG9rZW4pIHtcbiAgICAgICAgaWYgKHRva2VuID09PSBcIlwiKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IERPTUV4KFxuICAgICAgICAgICAgICBcIlNZTlRBWF9FUlJcIlxuICAgICAgICAgICAgLCBcIkFuIGludmFsaWQgb3IgaWxsZWdhbCBzdHJpbmcgd2FzIHNwZWNpZmllZFwiXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoL1xccy8udGVzdCh0b2tlbikpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRE9NRXgoXG4gICAgICAgICAgICAgIFwiSU5WQUxJRF9DSEFSQUNURVJfRVJSXCJcbiAgICAgICAgICAgICwgXCJTdHJpbmcgY29udGFpbnMgYW4gaW52YWxpZCBjaGFyYWN0ZXJcIlxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGFyckluZGV4T2YuY2FsbChjbGFzc0xpc3QsIHRva2VuKTtcbiAgICAgIH1cbiAgICAgICwgQ2xhc3NMaXN0ID0gZnVuY3Rpb24gKGVsZW0pIHtcbiAgICAgICAgdmFyXG4gICAgICAgICAgICB0cmltbWVkQ2xhc3NlcyA9IHN0clRyaW0uY2FsbChlbGVtLmdldEF0dHJpYnV0ZShcImNsYXNzXCIpIHx8IFwiXCIpXG4gICAgICAgICAgLCBjbGFzc2VzID0gdHJpbW1lZENsYXNzZXMgPyB0cmltbWVkQ2xhc3Nlcy5zcGxpdCgvXFxzKy8pIDogW11cbiAgICAgICAgICAsIGkgPSAwXG4gICAgICAgICAgLCBsZW4gPSBjbGFzc2VzLmxlbmd0aFxuICAgICAgICA7XG4gICAgICAgIGZvciAoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICB0aGlzLnB1c2goY2xhc3Nlc1tpXSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fdXBkYXRlQ2xhc3NOYW1lID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgIGVsZW0uc2V0QXR0cmlidXRlKFwiY2xhc3NcIiwgdGhpcy50b1N0cmluZygpKTtcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICAgICwgY2xhc3NMaXN0UHJvdG8gPSBDbGFzc0xpc3RbcHJvdG9Qcm9wXSA9IFtdXG4gICAgICAsIGNsYXNzTGlzdEdldHRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBDbGFzc0xpc3QodGhpcyk7XG4gICAgICB9XG4gICAgO1xuICAgIC8vIE1vc3QgRE9NRXhjZXB0aW9uIGltcGxlbWVudGF0aW9ucyBkb24ndCBhbGxvdyBjYWxsaW5nIERPTUV4Y2VwdGlvbidzIHRvU3RyaW5nKClcbiAgICAvLyBvbiBub24tRE9NRXhjZXB0aW9ucy4gRXJyb3IncyB0b1N0cmluZygpIGlzIHN1ZmZpY2llbnQgaGVyZS5cbiAgICBET01FeFtwcm90b1Byb3BdID0gRXJyb3JbcHJvdG9Qcm9wXTtcbiAgICBjbGFzc0xpc3RQcm90by5pdGVtID0gZnVuY3Rpb24gKGkpIHtcbiAgICAgIHJldHVybiB0aGlzW2ldIHx8IG51bGw7XG4gICAgfTtcbiAgICBjbGFzc0xpc3RQcm90by5jb250YWlucyA9IGZ1bmN0aW9uICh0b2tlbikge1xuICAgICAgdG9rZW4gKz0gXCJcIjtcbiAgICAgIHJldHVybiBjaGVja1Rva2VuQW5kR2V0SW5kZXgodGhpcywgdG9rZW4pICE9PSAtMTtcbiAgICB9O1xuICAgIGNsYXNzTGlzdFByb3RvLmFkZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhclxuICAgICAgICAgIHRva2VucyA9IGFyZ3VtZW50c1xuICAgICAgICAsIGkgPSAwXG4gICAgICAgICwgbCA9IHRva2Vucy5sZW5ndGhcbiAgICAgICAgLCB0b2tlblxuICAgICAgICAsIHVwZGF0ZWQgPSBmYWxzZVxuICAgICAgO1xuICAgICAgZG8ge1xuICAgICAgICB0b2tlbiA9IHRva2Vuc1tpXSArIFwiXCI7XG4gICAgICAgIGlmIChjaGVja1Rva2VuQW5kR2V0SW5kZXgodGhpcywgdG9rZW4pID09PSAtMSkge1xuICAgICAgICAgIHRoaXMucHVzaCh0b2tlbik7XG4gICAgICAgICAgdXBkYXRlZCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHdoaWxlICgrK2kgPCBsKTtcblxuICAgICAgaWYgKHVwZGF0ZWQpIHtcbiAgICAgICAgdGhpcy5fdXBkYXRlQ2xhc3NOYW1lKCk7XG4gICAgICB9XG4gICAgfTtcbiAgICBjbGFzc0xpc3RQcm90by5yZW1vdmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXJcbiAgICAgICAgICB0b2tlbnMgPSBhcmd1bWVudHNcbiAgICAgICAgLCBpID0gMFxuICAgICAgICAsIGwgPSB0b2tlbnMubGVuZ3RoXG4gICAgICAgICwgdG9rZW5cbiAgICAgICAgLCB1cGRhdGVkID0gZmFsc2VcbiAgICAgICAgLCBpbmRleFxuICAgICAgO1xuICAgICAgZG8ge1xuICAgICAgICB0b2tlbiA9IHRva2Vuc1tpXSArIFwiXCI7XG4gICAgICAgIGluZGV4ID0gY2hlY2tUb2tlbkFuZEdldEluZGV4KHRoaXMsIHRva2VuKTtcbiAgICAgICAgd2hpbGUgKGluZGV4ICE9PSAtMSkge1xuICAgICAgICAgIHRoaXMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgICB1cGRhdGVkID0gdHJ1ZTtcbiAgICAgICAgICBpbmRleCA9IGNoZWNrVG9rZW5BbmRHZXRJbmRleCh0aGlzLCB0b2tlbik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHdoaWxlICgrK2kgPCBsKTtcblxuICAgICAgaWYgKHVwZGF0ZWQpIHtcbiAgICAgICAgdGhpcy5fdXBkYXRlQ2xhc3NOYW1lKCk7XG4gICAgICB9XG4gICAgfTtcbiAgICBjbGFzc0xpc3RQcm90by50b2dnbGUgPSBmdW5jdGlvbiAodG9rZW4sIGZvcmNlKSB7XG4gICAgICB0b2tlbiArPSBcIlwiO1xuXG4gICAgICB2YXJcbiAgICAgICAgICByZXN1bHQgPSB0aGlzLmNvbnRhaW5zKHRva2VuKVxuICAgICAgICAsIG1ldGhvZCA9IHJlc3VsdCA/XG4gICAgICAgICAgZm9yY2UgIT09IHRydWUgJiYgXCJyZW1vdmVcIlxuICAgICAgICA6XG4gICAgICAgICAgZm9yY2UgIT09IGZhbHNlICYmIFwiYWRkXCJcbiAgICAgIDtcblxuICAgICAgaWYgKG1ldGhvZCkge1xuICAgICAgICB0aGlzW21ldGhvZF0odG9rZW4pO1xuICAgICAgfVxuXG4gICAgICBpZiAoZm9yY2UgPT09IHRydWUgfHwgZm9yY2UgPT09IGZhbHNlKSB7XG4gICAgICAgIHJldHVybiBmb3JjZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiAhcmVzdWx0O1xuICAgICAgfVxuICAgIH07XG4gICAgY2xhc3NMaXN0UHJvdG8udG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdGhpcy5qb2luKFwiIFwiKTtcbiAgICB9O1xuXG4gICAgaWYgKG9iakN0ci5kZWZpbmVQcm9wZXJ0eSkge1xuICAgICAgdmFyIGNsYXNzTGlzdFByb3BEZXNjID0ge1xuICAgICAgICAgIGdldDogY2xhc3NMaXN0R2V0dGVyXG4gICAgICAgICwgZW51bWVyYWJsZTogdHJ1ZVxuICAgICAgICAsIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgICAgfTtcbiAgICAgIHRyeSB7XG4gICAgICAgIG9iakN0ci5kZWZpbmVQcm9wZXJ0eShlbGVtQ3RyUHJvdG8sIGNsYXNzTGlzdFByb3AsIGNsYXNzTGlzdFByb3BEZXNjKTtcbiAgICAgIH0gY2F0Y2ggKGV4KSB7IC8vIElFIDggZG9lc24ndCBzdXBwb3J0IGVudW1lcmFibGU6dHJ1ZVxuICAgICAgICBpZiAoZXgubnVtYmVyID09PSAtMHg3RkY1RUM1NCkge1xuICAgICAgICAgIGNsYXNzTGlzdFByb3BEZXNjLmVudW1lcmFibGUgPSBmYWxzZTtcbiAgICAgICAgICBvYmpDdHIuZGVmaW5lUHJvcGVydHkoZWxlbUN0clByb3RvLCBjbGFzc0xpc3RQcm9wLCBjbGFzc0xpc3RQcm9wRGVzYyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKG9iakN0cltwcm90b1Byb3BdLl9fZGVmaW5lR2V0dGVyX18pIHtcbiAgICAgIGVsZW1DdHJQcm90by5fX2RlZmluZUdldHRlcl9fKGNsYXNzTGlzdFByb3AsIGNsYXNzTGlzdEdldHRlcik7XG4gICAgfVxuXG4gICAgfSh3aW5kb3cuc2VsZikpO1xuXG4gICAgfSBlbHNlIHtcbiAgICAvLyBUaGVyZSBpcyBmdWxsIG9yIHBhcnRpYWwgbmF0aXZlIGNsYXNzTGlzdCBzdXBwb3J0LCBzbyBqdXN0IGNoZWNrIGlmIHdlIG5lZWRcbiAgICAvLyB0byBub3JtYWxpemUgdGhlIGFkZC9yZW1vdmUgYW5kIHRvZ2dsZSBBUElzLlxuXG4gICAgKGZ1bmN0aW9uICgpIHtcbiAgICAgIFwidXNlIHN0cmljdFwiO1xuXG4gICAgICB2YXIgdGVzdEVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiX1wiKTtcblxuICAgICAgdGVzdEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImMxXCIsIFwiYzJcIik7XG5cbiAgICAgIC8vIFBvbHlmaWxsIGZvciBJRSAxMC8xMSBhbmQgRmlyZWZveCA8MjYsIHdoZXJlIGNsYXNzTGlzdC5hZGQgYW5kXG4gICAgICAvLyBjbGFzc0xpc3QucmVtb3ZlIGV4aXN0IGJ1dCBzdXBwb3J0IG9ubHkgb25lIGFyZ3VtZW50IGF0IGEgdGltZS5cbiAgICAgIGlmICghdGVzdEVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKFwiYzJcIikpIHtcbiAgICAgICAgdmFyIGNyZWF0ZU1ldGhvZCA9IGZ1bmN0aW9uKG1ldGhvZCkge1xuICAgICAgICAgIHZhciBvcmlnaW5hbCA9IERPTVRva2VuTGlzdC5wcm90b3R5cGVbbWV0aG9kXTtcblxuICAgICAgICAgIERPTVRva2VuTGlzdC5wcm90b3R5cGVbbWV0aG9kXSA9IGZ1bmN0aW9uKHRva2VuKSB7XG4gICAgICAgICAgICB2YXIgaSwgbGVuID0gYXJndW1lbnRzLmxlbmd0aDtcblxuICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgIHRva2VuID0gYXJndW1lbnRzW2ldO1xuICAgICAgICAgICAgICBvcmlnaW5hbC5jYWxsKHRoaXMsIHRva2VuKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9O1xuICAgICAgICB9O1xuICAgICAgICBjcmVhdGVNZXRob2QoJ2FkZCcpO1xuICAgICAgICBjcmVhdGVNZXRob2QoJ3JlbW92ZScpO1xuICAgICAgfVxuXG4gICAgICB0ZXN0RWxlbWVudC5jbGFzc0xpc3QudG9nZ2xlKFwiYzNcIiwgZmFsc2UpO1xuXG4gICAgICAvLyBQb2x5ZmlsbCBmb3IgSUUgMTAgYW5kIEZpcmVmb3ggPDI0LCB3aGVyZSBjbGFzc0xpc3QudG9nZ2xlIGRvZXMgbm90XG4gICAgICAvLyBzdXBwb3J0IHRoZSBzZWNvbmQgYXJndW1lbnQuXG4gICAgICBpZiAodGVzdEVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKFwiYzNcIikpIHtcbiAgICAgICAgdmFyIF90b2dnbGUgPSBET01Ub2tlbkxpc3QucHJvdG90eXBlLnRvZ2dsZTtcblxuICAgICAgICBET01Ub2tlbkxpc3QucHJvdG90eXBlLnRvZ2dsZSA9IGZ1bmN0aW9uKHRva2VuLCBmb3JjZSkge1xuICAgICAgICAgIGlmICgxIGluIGFyZ3VtZW50cyAmJiAhdGhpcy5jb250YWlucyh0b2tlbikgPT09ICFmb3JjZSkge1xuICAgICAgICAgICAgcmV0dXJuIGZvcmNlO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gX3RvZ2dsZS5jYWxsKHRoaXMsIHRva2VuKTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgIH1cblxuICAgICAgdGVzdEVsZW1lbnQgPSBudWxsO1xuICAgIH0oKSk7XG4gIH1cbn1cbiIsInJlcXVpcmUoJy4uLy4uL21vZHVsZXMvZXM2LmFycmF5LmZpbmQnKTtcbm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZSgnLi4vLi4vbW9kdWxlcy8kLmNvcmUnKS5BcnJheS5maW5kOyIsInJlcXVpcmUoJy4uLy4uL21vZHVsZXMvZXM2Lm9iamVjdC5hc3NpZ24nKTtcbm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZSgnLi4vLi4vbW9kdWxlcy8kLmNvcmUnKS5PYmplY3QuYXNzaWduOyIsInJlcXVpcmUoJy4uLy4uL21vZHVsZXMvZXM3LnJlZ2V4cC5lc2NhcGUnKTtcbm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZSgnLi4vLi4vbW9kdWxlcy8kLmNvcmUnKS5SZWdFeHAuZXNjYXBlOyIsIm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oaXQpe1xuICBpZih0eXBlb2YgaXQgIT0gJ2Z1bmN0aW9uJyl0aHJvdyBUeXBlRXJyb3IoaXQgKyAnIGlzIG5vdCBhIGZ1bmN0aW9uIScpO1xuICByZXR1cm4gaXQ7XG59OyIsIm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oKXsgLyogZW1wdHkgKi8gfTsiLCIvLyAwIC0+IEFycmF5I2ZvckVhY2hcbi8vIDEgLT4gQXJyYXkjbWFwXG4vLyAyIC0+IEFycmF5I2ZpbHRlclxuLy8gMyAtPiBBcnJheSNzb21lXG4vLyA0IC0+IEFycmF5I2V2ZXJ5XG4vLyA1IC0+IEFycmF5I2ZpbmRcbi8vIDYgLT4gQXJyYXkjZmluZEluZGV4XG52YXIgY3R4ICAgICAgPSByZXF1aXJlKCcuLyQuY3R4JylcbiAgLCBJT2JqZWN0ICA9IHJlcXVpcmUoJy4vJC5pb2JqZWN0JylcbiAgLCB0b09iamVjdCA9IHJlcXVpcmUoJy4vJC50by1vYmplY3QnKVxuICAsIHRvTGVuZ3RoID0gcmVxdWlyZSgnLi8kLnRvLWxlbmd0aCcpXG4gICwgYXNjICAgICAgPSByZXF1aXJlKCcuLyQuYXJyYXktc3BlY2llcy1jcmVhdGUnKTtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oVFlQRSl7XG4gIHZhciBJU19NQVAgICAgICAgID0gVFlQRSA9PSAxXG4gICAgLCBJU19GSUxURVIgICAgID0gVFlQRSA9PSAyXG4gICAgLCBJU19TT01FICAgICAgID0gVFlQRSA9PSAzXG4gICAgLCBJU19FVkVSWSAgICAgID0gVFlQRSA9PSA0XG4gICAgLCBJU19GSU5EX0lOREVYID0gVFlQRSA9PSA2XG4gICAgLCBOT19IT0xFUyAgICAgID0gVFlQRSA9PSA1IHx8IElTX0ZJTkRfSU5ERVg7XG4gIHJldHVybiBmdW5jdGlvbigkdGhpcywgY2FsbGJhY2tmbiwgdGhhdCl7XG4gICAgdmFyIE8gICAgICA9IHRvT2JqZWN0KCR0aGlzKVxuICAgICAgLCBzZWxmICAgPSBJT2JqZWN0KE8pXG4gICAgICAsIGYgICAgICA9IGN0eChjYWxsYmFja2ZuLCB0aGF0LCAzKVxuICAgICAgLCBsZW5ndGggPSB0b0xlbmd0aChzZWxmLmxlbmd0aClcbiAgICAgICwgaW5kZXggID0gMFxuICAgICAgLCByZXN1bHQgPSBJU19NQVAgPyBhc2MoJHRoaXMsIGxlbmd0aCkgOiBJU19GSUxURVIgPyBhc2MoJHRoaXMsIDApIDogdW5kZWZpbmVkXG4gICAgICAsIHZhbCwgcmVzO1xuICAgIGZvcig7bGVuZ3RoID4gaW5kZXg7IGluZGV4KyspaWYoTk9fSE9MRVMgfHwgaW5kZXggaW4gc2VsZil7XG4gICAgICB2YWwgPSBzZWxmW2luZGV4XTtcbiAgICAgIHJlcyA9IGYodmFsLCBpbmRleCwgTyk7XG4gICAgICBpZihUWVBFKXtcbiAgICAgICAgaWYoSVNfTUFQKXJlc3VsdFtpbmRleF0gPSByZXM7ICAgICAgICAgICAgLy8gbWFwXG4gICAgICAgIGVsc2UgaWYocmVzKXN3aXRjaChUWVBFKXtcbiAgICAgICAgICBjYXNlIDM6IHJldHVybiB0cnVlOyAgICAgICAgICAgICAgICAgICAgLy8gc29tZVxuICAgICAgICAgIGNhc2UgNTogcmV0dXJuIHZhbDsgICAgICAgICAgICAgICAgICAgICAvLyBmaW5kXG4gICAgICAgICAgY2FzZSA2OiByZXR1cm4gaW5kZXg7ICAgICAgICAgICAgICAgICAgIC8vIGZpbmRJbmRleFxuICAgICAgICAgIGNhc2UgMjogcmVzdWx0LnB1c2godmFsKTsgICAgICAgICAgICAgICAvLyBmaWx0ZXJcbiAgICAgICAgfSBlbHNlIGlmKElTX0VWRVJZKXJldHVybiBmYWxzZTsgICAgICAgICAgLy8gZXZlcnlcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIElTX0ZJTkRfSU5ERVggPyAtMSA6IElTX1NPTUUgfHwgSVNfRVZFUlkgPyBJU19FVkVSWSA6IHJlc3VsdDtcbiAgfTtcbn07IiwiLy8gOS40LjIuMyBBcnJheVNwZWNpZXNDcmVhdGUob3JpZ2luYWxBcnJheSwgbGVuZ3RoKVxudmFyIGlzT2JqZWN0ID0gcmVxdWlyZSgnLi8kLmlzLW9iamVjdCcpXG4gICwgaXNBcnJheSAgPSByZXF1aXJlKCcuLyQuaXMtYXJyYXknKVxuICAsIFNQRUNJRVMgID0gcmVxdWlyZSgnLi8kLndrcycpKCdzcGVjaWVzJyk7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKG9yaWdpbmFsLCBsZW5ndGgpe1xuICB2YXIgQztcbiAgaWYoaXNBcnJheShvcmlnaW5hbCkpe1xuICAgIEMgPSBvcmlnaW5hbC5jb25zdHJ1Y3RvcjtcbiAgICAvLyBjcm9zcy1yZWFsbSBmYWxsYmFja1xuICAgIGlmKHR5cGVvZiBDID09ICdmdW5jdGlvbicgJiYgKEMgPT09IEFycmF5IHx8IGlzQXJyYXkoQy5wcm90b3R5cGUpKSlDID0gdW5kZWZpbmVkO1xuICAgIGlmKGlzT2JqZWN0KEMpKXtcbiAgICAgIEMgPSBDW1NQRUNJRVNdO1xuICAgICAgaWYoQyA9PT0gbnVsbClDID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgfSByZXR1cm4gbmV3IChDID09PSB1bmRlZmluZWQgPyBBcnJheSA6IEMpKGxlbmd0aCk7XG59OyIsInZhciB0b1N0cmluZyA9IHt9LnRvU3RyaW5nO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGl0KXtcbiAgcmV0dXJuIHRvU3RyaW5nLmNhbGwoaXQpLnNsaWNlKDgsIC0xKTtcbn07IiwidmFyIGNvcmUgPSBtb2R1bGUuZXhwb3J0cyA9IHt2ZXJzaW9uOiAnMS4yLjYnfTtcbmlmKHR5cGVvZiBfX2UgPT0gJ251bWJlcicpX19lID0gY29yZTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bmRlZiIsIi8vIG9wdGlvbmFsIC8gc2ltcGxlIGNvbnRleHQgYmluZGluZ1xudmFyIGFGdW5jdGlvbiA9IHJlcXVpcmUoJy4vJC5hLWZ1bmN0aW9uJyk7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGZuLCB0aGF0LCBsZW5ndGgpe1xuICBhRnVuY3Rpb24oZm4pO1xuICBpZih0aGF0ID09PSB1bmRlZmluZWQpcmV0dXJuIGZuO1xuICBzd2l0Y2gobGVuZ3RoKXtcbiAgICBjYXNlIDE6IHJldHVybiBmdW5jdGlvbihhKXtcbiAgICAgIHJldHVybiBmbi5jYWxsKHRoYXQsIGEpO1xuICAgIH07XG4gICAgY2FzZSAyOiByZXR1cm4gZnVuY3Rpb24oYSwgYil7XG4gICAgICByZXR1cm4gZm4uY2FsbCh0aGF0LCBhLCBiKTtcbiAgICB9O1xuICAgIGNhc2UgMzogcmV0dXJuIGZ1bmN0aW9uKGEsIGIsIGMpe1xuICAgICAgcmV0dXJuIGZuLmNhbGwodGhhdCwgYSwgYiwgYyk7XG4gICAgfTtcbiAgfVxuICByZXR1cm4gZnVuY3Rpb24oLyogLi4uYXJncyAqLyl7XG4gICAgcmV0dXJuIGZuLmFwcGx5KHRoYXQsIGFyZ3VtZW50cyk7XG4gIH07XG59OyIsIi8vIDcuMi4xIFJlcXVpcmVPYmplY3RDb2VyY2libGUoYXJndW1lbnQpXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGl0KXtcbiAgaWYoaXQgPT0gdW5kZWZpbmVkKXRocm93IFR5cGVFcnJvcihcIkNhbid0IGNhbGwgbWV0aG9kIG9uICBcIiArIGl0KTtcbiAgcmV0dXJuIGl0O1xufTsiLCJ2YXIgZ2xvYmFsICAgID0gcmVxdWlyZSgnLi8kLmdsb2JhbCcpXG4gICwgY29yZSAgICAgID0gcmVxdWlyZSgnLi8kLmNvcmUnKVxuICAsIGN0eCAgICAgICA9IHJlcXVpcmUoJy4vJC5jdHgnKVxuICAsIFBST1RPVFlQRSA9ICdwcm90b3R5cGUnO1xuXG52YXIgJGV4cG9ydCA9IGZ1bmN0aW9uKHR5cGUsIG5hbWUsIHNvdXJjZSl7XG4gIHZhciBJU19GT1JDRUQgPSB0eXBlICYgJGV4cG9ydC5GXG4gICAgLCBJU19HTE9CQUwgPSB0eXBlICYgJGV4cG9ydC5HXG4gICAgLCBJU19TVEFUSUMgPSB0eXBlICYgJGV4cG9ydC5TXG4gICAgLCBJU19QUk9UTyAgPSB0eXBlICYgJGV4cG9ydC5QXG4gICAgLCBJU19CSU5EICAgPSB0eXBlICYgJGV4cG9ydC5CXG4gICAgLCBJU19XUkFQICAgPSB0eXBlICYgJGV4cG9ydC5XXG4gICAgLCBleHBvcnRzICAgPSBJU19HTE9CQUwgPyBjb3JlIDogY29yZVtuYW1lXSB8fCAoY29yZVtuYW1lXSA9IHt9KVxuICAgICwgdGFyZ2V0ICAgID0gSVNfR0xPQkFMID8gZ2xvYmFsIDogSVNfU1RBVElDID8gZ2xvYmFsW25hbWVdIDogKGdsb2JhbFtuYW1lXSB8fCB7fSlbUFJPVE9UWVBFXVxuICAgICwga2V5LCBvd24sIG91dDtcbiAgaWYoSVNfR0xPQkFMKXNvdXJjZSA9IG5hbWU7XG4gIGZvcihrZXkgaW4gc291cmNlKXtcbiAgICAvLyBjb250YWlucyBpbiBuYXRpdmVcbiAgICBvd24gPSAhSVNfRk9SQ0VEICYmIHRhcmdldCAmJiBrZXkgaW4gdGFyZ2V0O1xuICAgIGlmKG93biAmJiBrZXkgaW4gZXhwb3J0cyljb250aW51ZTtcbiAgICAvLyBleHBvcnQgbmF0aXZlIG9yIHBhc3NlZFxuICAgIG91dCA9IG93biA/IHRhcmdldFtrZXldIDogc291cmNlW2tleV07XG4gICAgLy8gcHJldmVudCBnbG9iYWwgcG9sbHV0aW9uIGZvciBuYW1lc3BhY2VzXG4gICAgZXhwb3J0c1trZXldID0gSVNfR0xPQkFMICYmIHR5cGVvZiB0YXJnZXRba2V5XSAhPSAnZnVuY3Rpb24nID8gc291cmNlW2tleV1cbiAgICAvLyBiaW5kIHRpbWVycyB0byBnbG9iYWwgZm9yIGNhbGwgZnJvbSBleHBvcnQgY29udGV4dFxuICAgIDogSVNfQklORCAmJiBvd24gPyBjdHgob3V0LCBnbG9iYWwpXG4gICAgLy8gd3JhcCBnbG9iYWwgY29uc3RydWN0b3JzIGZvciBwcmV2ZW50IGNoYW5nZSB0aGVtIGluIGxpYnJhcnlcbiAgICA6IElTX1dSQVAgJiYgdGFyZ2V0W2tleV0gPT0gb3V0ID8gKGZ1bmN0aW9uKEMpe1xuICAgICAgdmFyIEYgPSBmdW5jdGlvbihwYXJhbSl7XG4gICAgICAgIHJldHVybiB0aGlzIGluc3RhbmNlb2YgQyA/IG5ldyBDKHBhcmFtKSA6IEMocGFyYW0pO1xuICAgICAgfTtcbiAgICAgIEZbUFJPVE9UWVBFXSA9IENbUFJPVE9UWVBFXTtcbiAgICAgIHJldHVybiBGO1xuICAgIC8vIG1ha2Ugc3RhdGljIHZlcnNpb25zIGZvciBwcm90b3R5cGUgbWV0aG9kc1xuICAgIH0pKG91dCkgOiBJU19QUk9UTyAmJiB0eXBlb2Ygb3V0ID09ICdmdW5jdGlvbicgPyBjdHgoRnVuY3Rpb24uY2FsbCwgb3V0KSA6IG91dDtcbiAgICBpZihJU19QUk9UTykoZXhwb3J0c1tQUk9UT1RZUEVdIHx8IChleHBvcnRzW1BST1RPVFlQRV0gPSB7fSkpW2tleV0gPSBvdXQ7XG4gIH1cbn07XG4vLyB0eXBlIGJpdG1hcFxuJGV4cG9ydC5GID0gMTsgIC8vIGZvcmNlZFxuJGV4cG9ydC5HID0gMjsgIC8vIGdsb2JhbFxuJGV4cG9ydC5TID0gNDsgIC8vIHN0YXRpY1xuJGV4cG9ydC5QID0gODsgIC8vIHByb3RvXG4kZXhwb3J0LkIgPSAxNjsgLy8gYmluZFxuJGV4cG9ydC5XID0gMzI7IC8vIHdyYXBcbm1vZHVsZS5leHBvcnRzID0gJGV4cG9ydDsiLCJtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGV4ZWMpe1xuICB0cnkge1xuICAgIHJldHVybiAhIWV4ZWMoKTtcbiAgfSBjYXRjaChlKXtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxufTsiLCIvLyBodHRwczovL2dpdGh1Yi5jb20vemxvaXJvY2svY29yZS1qcy9pc3N1ZXMvODYjaXNzdWVjb21tZW50LTExNTc1OTAyOFxudmFyIGdsb2JhbCA9IG1vZHVsZS5leHBvcnRzID0gdHlwZW9mIHdpbmRvdyAhPSAndW5kZWZpbmVkJyAmJiB3aW5kb3cuTWF0aCA9PSBNYXRoXG4gID8gd2luZG93IDogdHlwZW9mIHNlbGYgIT0gJ3VuZGVmaW5lZCcgJiYgc2VsZi5NYXRoID09IE1hdGggPyBzZWxmIDogRnVuY3Rpb24oJ3JldHVybiB0aGlzJykoKTtcbmlmKHR5cGVvZiBfX2cgPT0gJ251bWJlcicpX19nID0gZ2xvYmFsOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVuZGVmIiwiLy8gZmFsbGJhY2sgZm9yIG5vbi1hcnJheS1saWtlIEVTMyBhbmQgbm9uLWVudW1lcmFibGUgb2xkIFY4IHN0cmluZ3NcbnZhciBjb2YgPSByZXF1aXJlKCcuLyQuY29mJyk7XG5tb2R1bGUuZXhwb3J0cyA9IE9iamVjdCgneicpLnByb3BlcnR5SXNFbnVtZXJhYmxlKDApID8gT2JqZWN0IDogZnVuY3Rpb24oaXQpe1xuICByZXR1cm4gY29mKGl0KSA9PSAnU3RyaW5nJyA/IGl0LnNwbGl0KCcnKSA6IE9iamVjdChpdCk7XG59OyIsIi8vIDcuMi4yIElzQXJyYXkoYXJndW1lbnQpXG52YXIgY29mID0gcmVxdWlyZSgnLi8kLmNvZicpO1xubW9kdWxlLmV4cG9ydHMgPSBBcnJheS5pc0FycmF5IHx8IGZ1bmN0aW9uKGFyZyl7XG4gIHJldHVybiBjb2YoYXJnKSA9PSAnQXJyYXknO1xufTsiLCJtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGl0KXtcbiAgcmV0dXJuIHR5cGVvZiBpdCA9PT0gJ29iamVjdCcgPyBpdCAhPT0gbnVsbCA6IHR5cGVvZiBpdCA9PT0gJ2Z1bmN0aW9uJztcbn07IiwidmFyICRPYmplY3QgPSBPYmplY3Q7XG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgY3JlYXRlOiAgICAgJE9iamVjdC5jcmVhdGUsXG4gIGdldFByb3RvOiAgICRPYmplY3QuZ2V0UHJvdG90eXBlT2YsXG4gIGlzRW51bTogICAgIHt9LnByb3BlcnR5SXNFbnVtZXJhYmxlLFxuICBnZXREZXNjOiAgICAkT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcixcbiAgc2V0RGVzYzogICAgJE9iamVjdC5kZWZpbmVQcm9wZXJ0eSxcbiAgc2V0RGVzY3M6ICAgJE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzLFxuICBnZXRLZXlzOiAgICAkT2JqZWN0LmtleXMsXG4gIGdldE5hbWVzOiAgICRPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyxcbiAgZ2V0U3ltYm9sczogJE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMsXG4gIGVhY2g6ICAgICAgIFtdLmZvckVhY2hcbn07IiwiLy8gMTkuMS4yLjEgT2JqZWN0LmFzc2lnbih0YXJnZXQsIHNvdXJjZSwgLi4uKVxudmFyICQgICAgICAgID0gcmVxdWlyZSgnLi8kJylcbiAgLCB0b09iamVjdCA9IHJlcXVpcmUoJy4vJC50by1vYmplY3QnKVxuICAsIElPYmplY3QgID0gcmVxdWlyZSgnLi8kLmlvYmplY3QnKTtcblxuLy8gc2hvdWxkIHdvcmsgd2l0aCBzeW1ib2xzIGFuZCBzaG91bGQgaGF2ZSBkZXRlcm1pbmlzdGljIHByb3BlcnR5IG9yZGVyIChWOCBidWcpXG5tb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoJy4vJC5mYWlscycpKGZ1bmN0aW9uKCl7XG4gIHZhciBhID0gT2JqZWN0LmFzc2lnblxuICAgICwgQSA9IHt9XG4gICAgLCBCID0ge31cbiAgICAsIFMgPSBTeW1ib2woKVxuICAgICwgSyA9ICdhYmNkZWZnaGlqa2xtbm9wcXJzdCc7XG4gIEFbU10gPSA3O1xuICBLLnNwbGl0KCcnKS5mb3JFYWNoKGZ1bmN0aW9uKGspeyBCW2tdID0gazsgfSk7XG4gIHJldHVybiBhKHt9LCBBKVtTXSAhPSA3IHx8IE9iamVjdC5rZXlzKGEoe30sIEIpKS5qb2luKCcnKSAhPSBLO1xufSkgPyBmdW5jdGlvbiBhc3NpZ24odGFyZ2V0LCBzb3VyY2UpeyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVudXNlZC12YXJzXG4gIHZhciBUICAgICA9IHRvT2JqZWN0KHRhcmdldClcbiAgICAsICQkICAgID0gYXJndW1lbnRzXG4gICAgLCAkJGxlbiA9ICQkLmxlbmd0aFxuICAgICwgaW5kZXggPSAxXG4gICAgLCBnZXRLZXlzICAgID0gJC5nZXRLZXlzXG4gICAgLCBnZXRTeW1ib2xzID0gJC5nZXRTeW1ib2xzXG4gICAgLCBpc0VudW0gICAgID0gJC5pc0VudW07XG4gIHdoaWxlKCQkbGVuID4gaW5kZXgpe1xuICAgIHZhciBTICAgICAgPSBJT2JqZWN0KCQkW2luZGV4KytdKVxuICAgICAgLCBrZXlzICAgPSBnZXRTeW1ib2xzID8gZ2V0S2V5cyhTKS5jb25jYXQoZ2V0U3ltYm9scyhTKSkgOiBnZXRLZXlzKFMpXG4gICAgICAsIGxlbmd0aCA9IGtleXMubGVuZ3RoXG4gICAgICAsIGogICAgICA9IDBcbiAgICAgICwga2V5O1xuICAgIHdoaWxlKGxlbmd0aCA+IGopaWYoaXNFbnVtLmNhbGwoUywga2V5ID0ga2V5c1tqKytdKSlUW2tleV0gPSBTW2tleV07XG4gIH1cbiAgcmV0dXJuIFQ7XG59IDogT2JqZWN0LmFzc2lnbjsiLCJtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKHJlZ0V4cCwgcmVwbGFjZSl7XG4gIHZhciByZXBsYWNlciA9IHJlcGxhY2UgPT09IE9iamVjdChyZXBsYWNlKSA/IGZ1bmN0aW9uKHBhcnQpe1xuICAgIHJldHVybiByZXBsYWNlW3BhcnRdO1xuICB9IDogcmVwbGFjZTtcbiAgcmV0dXJuIGZ1bmN0aW9uKGl0KXtcbiAgICByZXR1cm4gU3RyaW5nKGl0KS5yZXBsYWNlKHJlZ0V4cCwgcmVwbGFjZXIpO1xuICB9O1xufTsiLCJ2YXIgZ2xvYmFsID0gcmVxdWlyZSgnLi8kLmdsb2JhbCcpXG4gICwgU0hBUkVEID0gJ19fY29yZS1qc19zaGFyZWRfXydcbiAgLCBzdG9yZSAgPSBnbG9iYWxbU0hBUkVEXSB8fCAoZ2xvYmFsW1NIQVJFRF0gPSB7fSk7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGtleSl7XG4gIHJldHVybiBzdG9yZVtrZXldIHx8IChzdG9yZVtrZXldID0ge30pO1xufTsiLCIvLyA3LjEuNCBUb0ludGVnZXJcbnZhciBjZWlsICA9IE1hdGguY2VpbFxuICAsIGZsb29yID0gTWF0aC5mbG9vcjtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oaXQpe1xuICByZXR1cm4gaXNOYU4oaXQgPSAraXQpID8gMCA6IChpdCA+IDAgPyBmbG9vciA6IGNlaWwpKGl0KTtcbn07IiwiLy8gNy4xLjE1IFRvTGVuZ3RoXG52YXIgdG9JbnRlZ2VyID0gcmVxdWlyZSgnLi8kLnRvLWludGVnZXInKVxuICAsIG1pbiAgICAgICA9IE1hdGgubWluO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihpdCl7XG4gIHJldHVybiBpdCA+IDAgPyBtaW4odG9JbnRlZ2VyKGl0KSwgMHgxZmZmZmZmZmZmZmZmZikgOiAwOyAvLyBwb3coMiwgNTMpIC0gMSA9PSA5MDA3MTk5MjU0NzQwOTkxXG59OyIsIi8vIDcuMS4xMyBUb09iamVjdChhcmd1bWVudClcbnZhciBkZWZpbmVkID0gcmVxdWlyZSgnLi8kLmRlZmluZWQnKTtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oaXQpe1xuICByZXR1cm4gT2JqZWN0KGRlZmluZWQoaXQpKTtcbn07IiwidmFyIGlkID0gMFxuICAsIHB4ID0gTWF0aC5yYW5kb20oKTtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oa2V5KXtcbiAgcmV0dXJuICdTeW1ib2woJy5jb25jYXQoa2V5ID09PSB1bmRlZmluZWQgPyAnJyA6IGtleSwgJylfJywgKCsraWQgKyBweCkudG9TdHJpbmcoMzYpKTtcbn07IiwidmFyIHN0b3JlICA9IHJlcXVpcmUoJy4vJC5zaGFyZWQnKSgnd2tzJylcbiAgLCB1aWQgICAgPSByZXF1aXJlKCcuLyQudWlkJylcbiAgLCBTeW1ib2wgPSByZXF1aXJlKCcuLyQuZ2xvYmFsJykuU3ltYm9sO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihuYW1lKXtcbiAgcmV0dXJuIHN0b3JlW25hbWVdIHx8IChzdG9yZVtuYW1lXSA9XG4gICAgU3ltYm9sICYmIFN5bWJvbFtuYW1lXSB8fCAoU3ltYm9sIHx8IHVpZCkoJ1N5bWJvbC4nICsgbmFtZSkpO1xufTsiLCIndXNlIHN0cmljdCc7XG4vLyAyMi4xLjMuOCBBcnJheS5wcm90b3R5cGUuZmluZChwcmVkaWNhdGUsIHRoaXNBcmcgPSB1bmRlZmluZWQpXG52YXIgJGV4cG9ydCA9IHJlcXVpcmUoJy4vJC5leHBvcnQnKVxuICAsICRmaW5kICAgPSByZXF1aXJlKCcuLyQuYXJyYXktbWV0aG9kcycpKDUpXG4gICwgS0VZICAgICA9ICdmaW5kJ1xuICAsIGZvcmNlZCAgPSB0cnVlO1xuLy8gU2hvdWxkbid0IHNraXAgaG9sZXNcbmlmKEtFWSBpbiBbXSlBcnJheSgxKVtLRVldKGZ1bmN0aW9uKCl7IGZvcmNlZCA9IGZhbHNlOyB9KTtcbiRleHBvcnQoJGV4cG9ydC5QICsgJGV4cG9ydC5GICogZm9yY2VkLCAnQXJyYXknLCB7XG4gIGZpbmQ6IGZ1bmN0aW9uIGZpbmQoY2FsbGJhY2tmbi8qLCB0aGF0ID0gdW5kZWZpbmVkICovKXtcbiAgICByZXR1cm4gJGZpbmQodGhpcywgY2FsbGJhY2tmbiwgYXJndW1lbnRzLmxlbmd0aCA+IDEgPyBhcmd1bWVudHNbMV0gOiB1bmRlZmluZWQpO1xuICB9XG59KTtcbnJlcXVpcmUoJy4vJC5hZGQtdG8tdW5zY29wYWJsZXMnKShLRVkpOyIsIi8vIDE5LjEuMy4xIE9iamVjdC5hc3NpZ24odGFyZ2V0LCBzb3VyY2UpXG52YXIgJGV4cG9ydCA9IHJlcXVpcmUoJy4vJC5leHBvcnQnKTtcblxuJGV4cG9ydCgkZXhwb3J0LlMgKyAkZXhwb3J0LkYsICdPYmplY3QnLCB7YXNzaWduOiByZXF1aXJlKCcuLyQub2JqZWN0LWFzc2lnbicpfSk7IiwiLy8gaHR0cHM6Ly9naXRodWIuY29tL2JlbmphbWluZ3IvUmV4RXhwLmVzY2FwZVxudmFyICRleHBvcnQgPSByZXF1aXJlKCcuLyQuZXhwb3J0JylcbiAgLCAkcmUgICAgID0gcmVxdWlyZSgnLi8kLnJlcGxhY2VyJykoL1tcXFxcXiQqKz8uKCl8W1xcXXt9XS9nLCAnXFxcXCQmJyk7XG5cbiRleHBvcnQoJGV4cG9ydC5TLCAnUmVnRXhwJywge2VzY2FwZTogZnVuY3Rpb24gZXNjYXBlKGl0KXsgcmV0dXJuICRyZShpdCk7IH19KTtcbiIsIm1vZHVsZS5leHBvcnRzID0gRGF0ZS5ub3cgfHwgbm93XG5cbmZ1bmN0aW9uIG5vdygpIHtcbiAgICByZXR1cm4gbmV3IERhdGUoKS5nZXRUaW1lKClcbn1cbiIsIlxuLyoqXG4gKiBNb2R1bGUgZGVwZW5kZW5jaWVzLlxuICovXG5cbnZhciBub3cgPSByZXF1aXJlKCdkYXRlLW5vdycpO1xuXG4vKipcbiAqIFJldHVybnMgYSBmdW5jdGlvbiwgdGhhdCwgYXMgbG9uZyBhcyBpdCBjb250aW51ZXMgdG8gYmUgaW52b2tlZCwgd2lsbCBub3RcbiAqIGJlIHRyaWdnZXJlZC4gVGhlIGZ1bmN0aW9uIHdpbGwgYmUgY2FsbGVkIGFmdGVyIGl0IHN0b3BzIGJlaW5nIGNhbGxlZCBmb3JcbiAqIE4gbWlsbGlzZWNvbmRzLiBJZiBgaW1tZWRpYXRlYCBpcyBwYXNzZWQsIHRyaWdnZXIgdGhlIGZ1bmN0aW9uIG9uIHRoZVxuICogbGVhZGluZyBlZGdlLCBpbnN0ZWFkIG9mIHRoZSB0cmFpbGluZy5cbiAqXG4gKiBAc291cmNlIHVuZGVyc2NvcmUuanNcbiAqIEBzZWUgaHR0cDovL3Vuc2NyaXB0YWJsZS5jb20vMjAwOS8wMy8yMC9kZWJvdW5jaW5nLWphdmFzY3JpcHQtbWV0aG9kcy9cbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmN0aW9uIHRvIHdyYXBcbiAqIEBwYXJhbSB7TnVtYmVyfSB0aW1lb3V0IGluIG1zIChgMTAwYClcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gd2hldGhlciB0byBleGVjdXRlIGF0IHRoZSBiZWdpbm5pbmcgKGBmYWxzZWApXG4gKiBAYXBpIHB1YmxpY1xuICovXG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gZGVib3VuY2UoZnVuYywgd2FpdCwgaW1tZWRpYXRlKXtcbiAgdmFyIHRpbWVvdXQsIGFyZ3MsIGNvbnRleHQsIHRpbWVzdGFtcCwgcmVzdWx0O1xuICBpZiAobnVsbCA9PSB3YWl0KSB3YWl0ID0gMTAwO1xuXG4gIGZ1bmN0aW9uIGxhdGVyKCkge1xuICAgIHZhciBsYXN0ID0gbm93KCkgLSB0aW1lc3RhbXA7XG5cbiAgICBpZiAobGFzdCA8IHdhaXQgJiYgbGFzdCA+IDApIHtcbiAgICAgIHRpbWVvdXQgPSBzZXRUaW1lb3V0KGxhdGVyLCB3YWl0IC0gbGFzdCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRpbWVvdXQgPSBudWxsO1xuICAgICAgaWYgKCFpbW1lZGlhdGUpIHtcbiAgICAgICAgcmVzdWx0ID0gZnVuYy5hcHBseShjb250ZXh0LCBhcmdzKTtcbiAgICAgICAgaWYgKCF0aW1lb3V0KSBjb250ZXh0ID0gYXJncyA9IG51bGw7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiBmdW5jdGlvbiBkZWJvdW5jZWQoKSB7XG4gICAgY29udGV4dCA9IHRoaXM7XG4gICAgYXJncyA9IGFyZ3VtZW50cztcbiAgICB0aW1lc3RhbXAgPSBub3coKTtcbiAgICB2YXIgY2FsbE5vdyA9IGltbWVkaWF0ZSAmJiAhdGltZW91dDtcbiAgICBpZiAoIXRpbWVvdXQpIHRpbWVvdXQgPSBzZXRUaW1lb3V0KGxhdGVyLCB3YWl0KTtcbiAgICBpZiAoY2FsbE5vdykge1xuICAgICAgcmVzdWx0ID0gZnVuYy5hcHBseShjb250ZXh0LCBhcmdzKTtcbiAgICAgIGNvbnRleHQgPSBhcmdzID0gbnVsbDtcbiAgICB9XG5cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9O1xufTtcbiIsIihmdW5jdGlvbiAoRUxFTUVOVCkge1xuXHRFTEVNRU5ULm1hdGNoZXMgPSBFTEVNRU5ULm1hdGNoZXMgfHwgRUxFTUVOVC5tb3pNYXRjaGVzU2VsZWN0b3IgfHwgRUxFTUVOVC5tc01hdGNoZXNTZWxlY3RvciB8fCBFTEVNRU5ULm9NYXRjaGVzU2VsZWN0b3IgfHwgRUxFTUVOVC53ZWJraXRNYXRjaGVzU2VsZWN0b3I7XG5cblx0RUxFTUVOVC5jbG9zZXN0ID0gRUxFTUVOVC5jbG9zZXN0IHx8IGZ1bmN0aW9uIGNsb3Nlc3Qoc2VsZWN0b3IpIHtcblx0XHR2YXIgZWxlbWVudCA9IHRoaXM7XG5cblx0XHR3aGlsZSAoZWxlbWVudCkge1xuXHRcdFx0aWYgKGVsZW1lbnQubWF0Y2hlcyhzZWxlY3RvcikpIHtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHR9XG5cblx0XHRcdGVsZW1lbnQgPSBlbGVtZW50LnBhcmVudEVsZW1lbnQ7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGVsZW1lbnQ7XG5cdH07XG59KEVsZW1lbnQucHJvdG90eXBlKSk7XG4iLCJ2YXIgUGFyc2VyID0gcmVxdWlyZSgnLi9saWIvcGFyc2VyJylcbiAgLCBSZXNvdXJjZSA9IHJlcXVpcmUoJy4vbGliL3Jlc291cmNlJylcbiAgLCB2YWxpZGF0aW9uRmxhZyA9IGZhbHNlO1xuXG5tb2R1bGUuZXhwb3J0cyA9IHtcblxuICBwYXJzZTogZnVuY3Rpb24odW5wYXJzZWQpIHtcbiAgICByZXR1cm4gbmV3IFBhcnNlcigpLnBhcnNlKHVucGFyc2VkLCB2YWxpZGF0aW9uRmxhZyk7XG4gIH0sXG5cbiAgZW5hYmxlVmFsaWRhdGlvbjogZnVuY3Rpb24oZmxhZykge1xuICAgIHZhbGlkYXRpb25GbGFnID0gKGZsYWcgIT0gbnVsbCkgPyBmbGFnIDogdHJ1ZTtcbiAgfSxcblxuICBkaXNhYmxlVmFsaWRhdGlvbjogZnVuY3Rpb24oKSB7XG4gICAgdmFsaWRhdGlvbkZsYWcgPSBmYWxzZTtcbiAgfSxcblxuICBSZXNvdXJjZTogUmVzb3VyY2VcblxufTtcbiIsIid1c2Ugc3RyaWN0JztcblxuLypcbiAqIEEgdmVyeSBuYWl2ZSBjb3B5LW9uLXdyaXRlIGltbXV0YWJsZSBzdGFjay4gU2luY2UgdGhlIHNpemUgb2YgdGhlIHN0YWNrXG4gKiBpcyBlcXVhbCB0byB0aGUgZGVwdGggb2YgdGhlIGVtYmVkZGVkIHJlc291cmNlcyBmb3Igb25lIEhBTCByZXNvdXJjZSwgdGhlIGJhZFxuICogcGVyZm9ybWFuY2UgZm9yIHRoZSBjb3B5LW9uLXdyaXRlIGFwcHJvYWNoIGlzIHByb2JhYmx5IG5vdCBhIHByb2JsZW0gYXQgYWxsLlxuICogTWlnaHQgYmUgcmVwbGFjZWQgYnkgYSBzbWFydGVyIHNvbHV0aW9uIGxhdGVyLiBPciBub3QuIFdoYXRldmVyLlxuICovXG5mdW5jdGlvbiBJbW11dGFibGVTdGFjaygpIHtcbiAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPj0gMSkge1xuICAgIHRoaXMuX2FycmF5ID0gYXJndW1lbnRzWzBdO1xuICB9IGVsc2Uge1xuICAgIHRoaXMuX2FycmF5ID0gW107XG4gIH1cbn1cblxuSW1tdXRhYmxlU3RhY2sucHJvdG90eXBlLmFycmF5ID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiB0aGlzLl9hcnJheTtcbn07XG5cbkltbXV0YWJsZVN0YWNrLnByb3RvdHlwZS5pc0VtcHR5ID0gZnVuY3Rpb24oYXJyYXkpIHtcbiAgcmV0dXJuIHRoaXMuX2FycmF5Lmxlbmd0aCA9PT0gMDtcbn07XG5cbkltbXV0YWJsZVN0YWNrLnByb3RvdHlwZS5wdXNoID0gZnVuY3Rpb24oZWxlbWVudCkge1xuICB2YXIgYXJyYXkgPSB0aGlzLl9hcnJheS5zbGljZSgwKTtcbiAgYXJyYXkucHVzaChlbGVtZW50KTtcbiAgcmV0dXJuIG5ldyBJbW11dGFibGVTdGFjayhhcnJheSk7XG59O1xuXG5JbW11dGFibGVTdGFjay5wcm90b3R5cGUucG9wID0gZnVuY3Rpb24oKSB7XG4gIHZhciBhcnJheSA9IHRoaXMuX2FycmF5LnNsaWNlKDAsIHRoaXMuX2FycmF5Lmxlbmd0aCAtIDEpO1xuICByZXR1cm4gbmV3IEltbXV0YWJsZVN0YWNrKGFycmF5KTtcbn07XG5cbkltbXV0YWJsZVN0YWNrLnByb3RvdHlwZS5wZWVrID0gZnVuY3Rpb24oKSB7XG4gIGlmICh0aGlzLmlzRW1wdHkoKSkge1xuICAgIHRocm93IG5ldyBFcnJvcignY2FuXFwndCBwZWVrIG9uIGVtcHR5IHN0YWNrJyk7XG4gIH1cbiAgcmV0dXJuIHRoaXMuX2FycmF5W3RoaXMuX2FycmF5Lmxlbmd0aCAtIDFdO1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBJbW11dGFibGVTdGFjaztcbiIsIid1c2Ugc3RyaWN0JztcblxudmFyIFJlc291cmNlID0gcmVxdWlyZSgnLi9yZXNvdXJjZScpXG4gICwgU3RhY2sgPSByZXF1aXJlKCcuL2ltbXV0YWJsZV9zdGFjaycpO1xuXG52YXIgbGlua1NwZWMgPSB7XG4gIGhyZWY6IHsgcmVxdWlyZWQ6IHRydWUsIGRlZmF1bHRWYWx1ZTogbnVsbCB9LFxuICB0ZW1wbGF0ZWQ6IHsgcmVxdWlyZWQ6IGZhbHNlLCBkZWZhdWx0VmFsdWU6IGZhbHNlIH0sXG4gIHR5cGU6IHsgcmVxdWlyZWQ6IGZhbHNlLCBkZWZhdWx0VmFsdWU6IG51bGwgfSxcbiAgZGVwcmVjYXRpb246IHsgcmVxdWlyZWQ6IGZhbHNlLCBkZWZhdWx0VmFsdWU6IG51bGwgfSxcbiAgbmFtZTogeyByZXF1aXJlZDogZmFsc2UsIGRlZmF1bHRWYWx1ZTogbnVsbCB9LFxuICBwcm9maWxlOiB7IHJlcXVpcmVkOiBmYWxzZSwgZGVmYXVsdFZhbHVlOiBudWxsIH0sXG4gIHRpdGxlOiB7IHJlcXVpcmVkOiBmYWxzZSwgZGVmYXVsdFZhbHVlOiBudWxsIH0sXG4gIGhyZWZsYW5nOiB7IHJlcXVpcmVkOiBmYWxzZSwgZGVmYXVsdFZhbHVlOiBudWxsIH1cbn07XG5cbmZ1bmN0aW9uIFBhcnNlcigpIHtcbn1cblxuUGFyc2VyLnByb3RvdHlwZS5wYXJzZSA9IGZ1bmN0aW9uIHBhcnNlKHVucGFyc2VkLCB2YWxpZGF0aW9uRmxhZykge1xuICB2YXIgdmFsaWRhdGlvbiA9IHZhbGlkYXRpb25GbGFnID8gW10gOiBudWxsO1xuICByZXR1cm4gX3BhcnNlKHVucGFyc2VkLCB2YWxpZGF0aW9uLCBuZXcgU3RhY2soKSk7XG59O1xuXG5mdW5jdGlvbiBfcGFyc2UodW5wYXJzZWQsIHZhbGlkYXRpb24sIHBhdGgpIHtcbiAgaWYgKHVucGFyc2VkID09IG51bGwpIHtcbiAgICByZXR1cm4gdW5wYXJzZWQ7XG4gIH1cbiAgdmFyIGFsbExpbmtBcnJheXMgPSBwYXJzZUxpbmtzKHVucGFyc2VkLl9saW5rcywgdmFsaWRhdGlvbixcbiAgICAgIHBhdGgucHVzaCgnX2xpbmtzJykpO1xuICB2YXIgY3VyaWVzID0gcGFyc2VDdXJpZXMoYWxsTGlua0FycmF5cyk7XG4gIHZhciBhbGxFbWJlZGRlZEFycmF5cyA9IHBhcnNlRW1iZWRkZWRSZXNvdXJjZXNzKHVucGFyc2VkLl9lbWJlZGRlZCxcbiAgICAgIHZhbGlkYXRpb24sIHBhdGgucHVzaCgnX2VtYmVkZGVkJykpO1xuICB2YXIgcmVzb3VyY2UgPSBuZXcgUmVzb3VyY2UoYWxsTGlua0FycmF5cywgY3VyaWVzLCBhbGxFbWJlZGRlZEFycmF5cyxcbiAgICAgIHZhbGlkYXRpb24pO1xuICBjb3B5Tm9uSGFsUHJvcGVydGllcyh1bnBhcnNlZCwgcmVzb3VyY2UpO1xuICByZXNvdXJjZS5fb3JpZ2luYWwgPSB1bnBhcnNlZDtcbiAgcmV0dXJuIHJlc291cmNlO1xufVxuXG5mdW5jdGlvbiBwYXJzZUxpbmtzKGxpbmtzLCB2YWxpZGF0aW9uLCBwYXRoKSB7XG4gIGxpbmtzID0gcGFyc2VIYWxQcm9wZXJ0eShsaW5rcywgcGFyc2VMaW5rLCB2YWxpZGF0aW9uLCBwYXRoKTtcbiAgaWYgKGxpbmtzID09IG51bGwgfHwgbGlua3Muc2VsZiA9PSBudWxsKSB7XG4gICAgLy8gTm8gbGlua3MgYXQgYWxsPyBUaGVuIGl0IGltcGxpY3RseSBtaXNzZXMgdGhlIHNlbGYgbGluayB3aGljaCBpdCBTSE9VTERcbiAgICAvLyBoYXZlIGFjY29yZGluZyB0byBzcGVjXG4gICAgcmVwb3J0VmFsaWRhdGlvbklzc3VlKCdSZXNvdXJjZSBkb2VzIG5vdCBoYXZlIGEgc2VsZiBsaW5rJywgdmFsaWRhdGlvbixcbiAgICAgICAgcGF0aCk7XG4gIH1cbiAgcmV0dXJuIGxpbmtzO1xufVxuXG5mdW5jdGlvbiBwYXJzZUN1cmllcyhsaW5rQXJyYXlzKSB7XG4gIGlmIChsaW5rQXJyYXlzKSB7XG4gICAgcmV0dXJuIGxpbmtBcnJheXMuY3VyaWVzO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBbXTtcbiAgfVxufVxuXG5mdW5jdGlvbiBwYXJzZUVtYmVkZGVkUmVzb3VyY2VzcyhvcmlnaW5hbCwgcGFyZW50VmFsaWRhdGlvbiwgcGF0aCkge1xuICB2YXIgZW1iZWRkZWQgPSBwYXJzZUhhbFByb3BlcnR5KG9yaWdpbmFsLCBpZGVudGl0eSwgcGFyZW50VmFsaWRhdGlvbiwgcGF0aCk7XG4gIGlmIChlbWJlZGRlZCA9PSBudWxsKSB7XG4gICAgcmV0dXJuIGVtYmVkZGVkO1xuICB9XG4gIE9iamVjdC5rZXlzKGVtYmVkZGVkKS5mb3JFYWNoKGZ1bmN0aW9uKGtleSkge1xuICAgIGVtYmVkZGVkW2tleV0gPSBlbWJlZGRlZFtrZXldLm1hcChmdW5jdGlvbihlbWJlZGRlZEVsZW1lbnQpIHtcbiAgICAgIHZhciBjaGlsZFZhbGlkYXRpb24gPSBwYXJlbnRWYWxpZGF0aW9uICE9IG51bGwgPyBbXSA6IG51bGw7XG4gICAgICB2YXIgZW1iZWRkZWRSZXNvdXJjZSA9IF9wYXJzZShlbWJlZGRlZEVsZW1lbnQsIGNoaWxkVmFsaWRhdGlvbixcbiAgICAgICAgICBwYXRoLnB1c2goa2V5KSk7XG4gICAgICBlbWJlZGRlZFJlc291cmNlLl9vcmlnaW5hbCA9IGVtYmVkZGVkRWxlbWVudDtcbiAgICAgIHJldHVybiBlbWJlZGRlZFJlc291cmNlO1xuICAgIH0pO1xuICB9KTtcbiAgcmV0dXJuIGVtYmVkZGVkO1xufVxuXG4vKlxuICogQ29weSBvdmVyIG5vbi1oYWwgcHJvcGVydGllcyAoZXZlcnl0aGluZyB0aGF0IGlzIG5vdCBfbGlua3Mgb3IgX2VtYmVkZGVkKVxuICogdG8gdGhlIHBhcnNlZCByZXNvdXJjZS5cbiAqL1xuZnVuY3Rpb24gY29weU5vbkhhbFByb3BlcnRpZXModW5wYXJzZWQsIHJlc291cmNlKSB7XG4gIE9iamVjdC5rZXlzKHVucGFyc2VkKS5mb3JFYWNoKGZ1bmN0aW9uKGtleSkge1xuICAgIGlmIChrZXkgIT09ICdfbGlua3MnICYmIGtleSAhPT0gJ19lbWJlZGRlZCcpIHtcbiAgICAgIHJlc291cmNlW2tleV0gPSB1bnBhcnNlZFtrZXldO1xuICAgIH1cbiAgfSk7XG59XG5cbi8qXG4gKiBQcm9jZXNzZXMgb25lIG9mIHRoZSB0d28gbWFpbiBoYWwgcHJvcGVydGllcywgdGhhdCBpcyBfbGlua3Mgb3IgX2VtYmVkZGVkLlxuICogRWFjaCBzdWItcHJvcGVydHkgaXMgdHVybmVkIGludG8gYSBzaW5nbGUgZWxlbWVudCBhcnJheSBpZiBpdCBpc24ndCBhbHJlYWR5XG4gKiBhbiBhcnJheS4gcHJvY2Vzc2luZ0Z1bmN0aW9uIGlzIGFwcGxpZWQgdG8gZWFjaCBhcnJheSBlbGVtZW50LlxuICovXG5mdW5jdGlvbiBwYXJzZUhhbFByb3BlcnR5KHByb3BlcnR5LCBwcm9jZXNzaW5nRnVuY3Rpb24sIHZhbGlkYXRpb24sIHBhdGgpIHtcbiAgaWYgKHByb3BlcnR5ID09IG51bGwpIHtcbiAgICByZXR1cm4gcHJvcGVydHk7XG4gIH1cblxuICAvLyBjcmVhdGUgYSBzaGFsbG93IGNvcHkgb2YgdGhlIF9saW5rcy9fZW1iZWRkZWQgb2JqZWN0XG4gIHZhciBjb3B5ID0ge307XG5cbiAgLy8gbm9ybWFsaXplIGVhY2ggbGluay9lYWNoIGVtYmVkZGVkIG9iamVjdCBhbmQgcHV0IGl0IGludG8gb3VyIGNvcHlcbiAgT2JqZWN0LmtleXMocHJvcGVydHkpLmZvckVhY2goZnVuY3Rpb24oa2V5KSB7XG4gICAgY29weVtrZXldID0gYXJyYXlmeShrZXksIHByb3BlcnR5W2tleV0sIHByb2Nlc3NpbmdGdW5jdGlvbixcbiAgICAgICAgdmFsaWRhdGlvbiwgcGF0aCk7XG4gIH0pO1xuICByZXR1cm4gY29weTtcbn1cblxuZnVuY3Rpb24gYXJyYXlmeShrZXksIG9iamVjdCwgZm4sIHZhbGlkYXRpb24sIHBhdGgpIHtcbiAgaWYgKGlzQXJyYXkob2JqZWN0KSkge1xuICAgIHJldHVybiBvYmplY3QubWFwKGZ1bmN0aW9uKGVsZW1lbnQpIHtcbiAgICAgIHJldHVybiBmbihrZXksIGVsZW1lbnQsIHZhbGlkYXRpb24sIHBhdGgpO1xuICAgIH0pO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBbZm4oa2V5LCBvYmplY3QsIHZhbGlkYXRpb24sIHBhdGgpXTtcbiAgfVxufVxuXG5cbmZ1bmN0aW9uIHBhcnNlTGluayhsaW5rS2V5LCBsaW5rLCB2YWxpZGF0aW9uLCBwYXRoKSB7XG4gIGlmICghaXNPYmplY3QobGluaykpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0xpbmsgb2JqZWN0IGlzIG5vdCBhbiBhY3R1YWwgb2JqZWN0OiAnICsgbGluayArXG4gICAgICAnIFsnICsgdHlwZW9mIGxpbmsgKyAnXScpO1xuICB9XG5cbiAgLy8gY3JlYXRlIGEgc2hhbGxvdyBjb3B5IG9mIHRoZSBsaW5rIG9iamVjdFxuICB2YXIgY29weSA9IHNoYWxsb3dDb3B5KGxpbmspO1xuXG4gIC8vIGFkZCBtaXNzaW5nIHByb3BlcnRpZXMgbWFuZGF0ZWQgYnkgc3BlYyBhbmQgZG8gZ2VuZXJpYyB2YWxpZGF0aW9uXG4gIE9iamVjdC5rZXlzKGxpbmtTcGVjKS5mb3JFYWNoKGZ1bmN0aW9uKGtleSkge1xuICAgIGlmIChjb3B5W2tleV0gPT0gbnVsbCkge1xuICAgICAgaWYgKGxpbmtTcGVjW2tleV0ucmVxdWlyZWQpIHtcbiAgICAgICAgcmVwb3J0VmFsaWRhdGlvbklzc3VlKCdMaW5rIG1pc3NlcyByZXF1aXJlZCBwcm9wZXJ0eSAnICsga2V5ICsgJy4nLFxuICAgICAgICAgICAgdmFsaWRhdGlvbiwgcGF0aC5wdXNoKGxpbmtLZXkpKTtcbiAgICAgIH1cbiAgICAgIGlmIChsaW5rU3BlY1trZXldLmRlZmF1bHRWYWx1ZSAhPSBudWxsKSB7XG4gICAgICAgIGNvcHlba2V5XSA9IGxpbmtTcGVjW2tleV0uZGVmYXVsdFZhbHVlO1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG5cbiAgLy8gY2hlY2sgbW9yZSBpbnRlci1wcm9wZXJ0eSByZWxhdGlvbnMgbWFuZGF0ZWQgYnkgc3BlY1xuICBpZiAoY29weS5kZXByZWNhdGlvbikge1xuICAgIGxvZygnV2FybmluZzogTGluayAnICsgcGF0aFRvU3RyaW5nKHBhdGgucHVzaChsaW5rS2V5KSkgK1xuICAgICAgICAnIGlzIGRlcHJlY2F0ZWQsIHNlZSAnICsgY29weS5kZXByZWNhdGlvbik7XG4gIH1cbiAgaWYgKGNvcHkudGVtcGxhdGVkICE9PSB0cnVlICYmIGNvcHkudGVtcGxhdGVkICE9PSBmYWxzZSkge1xuICAgIGNvcHkudGVtcGxhdGVkID0gZmFsc2U7XG4gIH1cblxuICBpZiAoIXZhbGlkYXRpb24pIHtcbiAgICByZXR1cm4gY29weTtcbiAgfVxuICBpZiAoY29weS5ocmVmICYmIGNvcHkuaHJlZi5pbmRleE9mKCd7JykgPj0gMCAmJiAhY29weS50ZW1wbGF0ZWQpIHtcbiAgICByZXBvcnRWYWxpZGF0aW9uSXNzdWUoJ0xpbmsgc2VlbXMgdG8gYmUgYW4gVVJJIHRlbXBsYXRlICcgK1xuICAgICAgICAnYnV0IGl0cyBcInRlbXBsYXRlZFwiIHByb3BlcnR5IGlzIG5vdCBzZXQgdG8gdHJ1ZS4nLCB2YWxpZGF0aW9uLFxuICAgICAgICBwYXRoLnB1c2gobGlua0tleSkpO1xuICB9XG4gIHJldHVybiBjb3B5O1xufVxuXG5mdW5jdGlvbiBpc0FycmF5KG8pIHtcbiAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvKSA9PT0gJ1tvYmplY3QgQXJyYXldJztcbn1cblxuZnVuY3Rpb24gaXNPYmplY3Qobykge1xuICByZXR1cm4gdHlwZW9mIG8gPT09ICdvYmplY3QnO1xufVxuXG5mdW5jdGlvbiBpZGVudGl0eShrZXksIG9iamVjdCkge1xuICByZXR1cm4gb2JqZWN0O1xufVxuXG5mdW5jdGlvbiByZXBvcnRWYWxpZGF0aW9uSXNzdWUobWVzc2FnZSwgdmFsaWRhdGlvbiwgcGF0aCkge1xuICBpZiAodmFsaWRhdGlvbikge1xuICAgIHZhbGlkYXRpb24ucHVzaCh7XG4gICAgICBwYXRoOiBwYXRoVG9TdHJpbmcocGF0aCksXG4gICAgICBtZXNzYWdlOiBtZXNzYWdlXG4gICAgfSk7XG4gIH1cbn1cblxuLy8gVE9ETyBmaXggdGhpcyBhZCBob2MgbWVzcyAtIGRvZXMgaWUgc3VwcG9ydCBjb25zb2xlLmxvZyBhcyBvZiBpZTk/XG5mdW5jdGlvbiBsb2cobWVzc2FnZSkge1xuICBpZiAodHlwZW9mIGNvbnNvbGUgIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBjb25zb2xlLmxvZyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIGNvbnNvbGUubG9nKG1lc3NhZ2UpO1xuICB9XG59XG5cbmZ1bmN0aW9uIHNoYWxsb3dDb3B5KHNvdXJjZSkge1xuICB2YXIgY29weSA9IHt9O1xuICBPYmplY3Qua2V5cyhzb3VyY2UpLmZvckVhY2goZnVuY3Rpb24oa2V5KSB7XG4gICAgY29weVtrZXldID0gc291cmNlW2tleV07XG4gIH0pO1xuICByZXR1cm4gY29weTtcbn1cblxuZnVuY3Rpb24gcGF0aFRvU3RyaW5nKHBhdGgpIHtcbiAgdmFyIHMgPSAnJC4nO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IHBhdGguYXJyYXkoKS5sZW5ndGg7IGkrKykge1xuICAgIHMgKz0gcGF0aC5hcnJheSgpW2ldICsgJy4nO1xuICB9XG4gIHMgPSBzLnN1YnN0cmluZygwLCBzLmxlbmd0aCAtIDEpO1xuICByZXR1cm4gcztcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBQYXJzZXI7XG4iLCIndXNlIHN0cmljdCc7XG5cbmZ1bmN0aW9uIFJlc291cmNlKGxpbmtzLCBjdXJpZXMsIGVtYmVkZGVkLCB2YWxpZGF0aW9uSXNzdWVzKSB7XG4gIHZhciBzZWxmID0gdGhpcztcbiAgdGhpcy5fbGlua3MgPSBsaW5rcyB8fCB7fTtcbiAgdGhpcy5faW5pdEN1cmllcyhjdXJpZXMpO1xuICB0aGlzLl9lbWJlZGRlZCA9IGVtYmVkZGVkIHx8IHt9O1xuICB0aGlzLl92YWxpZGF0aW9uID0gdmFsaWRhdGlvbklzc3VlcyB8fCBbXTtcbn1cblxuUmVzb3VyY2UucHJvdG90eXBlLl9pbml0Q3VyaWVzID0gZnVuY3Rpb24oY3VyaWVzKSB7XG4gIHRoaXMuX2N1cmllc01hcCA9IHt9O1xuICBpZiAoIWN1cmllcykge1xuICAgIHRoaXMuX2N1cmllcyA9IFtdO1xuICB9IGVsc2Uge1xuICAgIHRoaXMuX2N1cmllcyA9IGN1cmllcztcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuX2N1cmllcy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIGN1cmllID0gdGhpcy5fY3VyaWVzW2ldO1xuICAgICAgdGhpcy5fY3VyaWVzTWFwW2N1cmllLm5hbWVdID0gY3VyaWU7XG4gICAgfVxuICB9XG4gIHRoaXMuX3ByZVJlc29sdmVDdXJpZXMoKTtcbn07XG5cblJlc291cmNlLnByb3RvdHlwZS5fcHJlUmVzb2x2ZUN1cmllcyA9IGZ1bmN0aW9uKCkge1xuICB0aGlzLl9yZXNvbHZlZEN1cmllc01hcCA9IHt9O1xuICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuX2N1cmllcy5sZW5ndGg7IGkrKykge1xuICAgIHZhciBjdXJpZSA9IHRoaXMuX2N1cmllc1tpXTtcbiAgICBpZiAoIWN1cmllLm5hbWUpIHtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cbiAgICBmb3IgKHZhciByZWwgaW4gdGhpcy5fbGlua3MpIHtcbiAgICAgIGlmIChyZWwgIT09ICdjdXJpZXMnKSB7XG4gICAgICAgIHRoaXMuX3ByZVJlc29sdmVDdXJpZShjdXJpZSwgcmVsKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn07XG5cblJlc291cmNlLnByb3RvdHlwZS5fcHJlUmVzb2x2ZUN1cmllID0gZnVuY3Rpb24oY3VyaWUsIHJlbCkge1xuICB2YXIgbGluayA9IHRoaXMuX2xpbmtzW3JlbF07XG4gIHZhciBwcmVmaXhBbmRSZWZlcmVuY2UgPSByZWwuc3BsaXQoLzooLispLyk7XG4gIHZhciBjYW5kaWRhdGUgPSBwcmVmaXhBbmRSZWZlcmVuY2VbMF07XG4gIGlmIChjdXJpZS5uYW1lID09PSBjYW5kaWRhdGUpIHtcbiAgICBpZiAoY3VyaWUudGVtcGxhdGVkICYmIHByZWZpeEFuZFJlZmVyZW5jZS5sZW5ndGggPj0gMSkge1xuICAgICAgLy8gVE9ETyByZXNvbHZpbmcgdGVtcGxhdGVkIENVUklFUyBzaG91bGQgdXNlIGEgc21hbGwgdXJpIHRlbXBsYXRlXG4gICAgICAvLyBsaWIsIG5vdCBjb2RlZCBoZXJlIGFkIGhvY1xuICAgICAgdmFyIGhyZWYgPSBjdXJpZS5ocmVmLnJlcGxhY2UoLyguKil7KC4qKX0oLiopLywgJyQxJyArXG4gICAgICAgICAgcHJlZml4QW5kUmVmZXJlbmNlWzFdICsgJyQzJyk7XG4gICAgICB0aGlzLl9yZXNvbHZlZEN1cmllc01hcFtocmVmXSA9IHJlbDtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fcmVzb2x2ZWRDdXJpZXNNYXBbY3VyaWUuaHJlZl0gPSByZWw7XG4gICAgfVxuICB9XG59O1xuXG5SZXNvdXJjZS5wcm90b3R5cGUuYWxsTGlua0FycmF5cyA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gdGhpcy5fbGlua3M7XG59O1xuXG5SZXNvdXJjZS5wcm90b3R5cGUubGlua0FycmF5ID0gZnVuY3Rpb24oa2V5KSB7XG4gIHJldHVybiBwcm9wZXJ0eUFycmF5KHRoaXMuX2xpbmtzLCBrZXkpO1xufTtcblxuUmVzb3VyY2UucHJvdG90eXBlLmxpbmsgPSBmdW5jdGlvbihrZXksIGluZGV4KSB7XG4gIHJldHVybiBlbGVtZW50T2ZQcm9wZXJ0eUFycmF5KHRoaXMuX2xpbmtzLCBrZXksIGluZGV4KTtcbn07XG5cblJlc291cmNlLnByb3RvdHlwZS5oYXNDdXJpZXMgPSBmdW5jdGlvbihrZXkpIHtcbiAgcmV0dXJuIHRoaXMuX2N1cmllcy5sZW5ndGggPiAwO1xufTtcblxuUmVzb3VyY2UucHJvdG90eXBlLmN1cmllQXJyYXkgPSBmdW5jdGlvbihrZXkpIHtcbiAgcmV0dXJuIHRoaXMuX2N1cmllcztcbn07XG5cblJlc291cmNlLnByb3RvdHlwZS5jdXJpZSA9IGZ1bmN0aW9uKG5hbWUpIHtcbiAgcmV0dXJuIHRoaXMuX2N1cmllc01hcFtuYW1lXTtcbn07XG5cblJlc291cmNlLnByb3RvdHlwZS5yZXZlcnNlUmVzb2x2ZUN1cmllID0gZnVuY3Rpb24oZnVsbFVybCkge1xuICByZXR1cm4gdGhpcy5fcmVzb2x2ZWRDdXJpZXNNYXBbZnVsbFVybF07XG59O1xuXG5SZXNvdXJjZS5wcm90b3R5cGUuYWxsRW1iZWRkZWRSZXNvdXJjZUFycmF5cyA9IGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIHRoaXMuX2VtYmVkZGVkO1xufTtcblxuUmVzb3VyY2UucHJvdG90eXBlLmVtYmVkZGVkUmVzb3VyY2VBcnJheSA9IGZ1bmN0aW9uKGtleSkge1xuICByZXR1cm4gcHJvcGVydHlBcnJheSh0aGlzLl9lbWJlZGRlZCwga2V5KTtcbn07XG5cblJlc291cmNlLnByb3RvdHlwZS5lbWJlZGRlZFJlc291cmNlID0gZnVuY3Rpb24oa2V5LCBpbmRleCkge1xuICByZXR1cm4gZWxlbWVudE9mUHJvcGVydHlBcnJheSh0aGlzLl9lbWJlZGRlZCwga2V5LCBpbmRleCk7XG59O1xuXG5SZXNvdXJjZS5wcm90b3R5cGUub3JpZ2luYWwgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIHRoaXMuX29yaWdpbmFsO1xufTtcblxuZnVuY3Rpb24gcHJvcGVydHlBcnJheShvYmplY3QsIGtleSkge1xuICByZXR1cm4gb2JqZWN0ICE9IG51bGwgPyBvYmplY3Rba2V5XSA6IG51bGw7XG59XG5cbmZ1bmN0aW9uIGVsZW1lbnRPZlByb3BlcnR5QXJyYXkob2JqZWN0LCBrZXksIGluZGV4KSB7XG4gIGluZGV4ID0gaW5kZXggfHwgMDtcbiAgdmFyIGFycmF5ID0gcHJvcGVydHlBcnJheShvYmplY3QsIGtleSk7XG4gIGlmIChhcnJheSAhPSBudWxsICYmIGFycmF5Lmxlbmd0aCA+PSAxKSB7XG4gICAgcmV0dXJuIGFycmF5W2luZGV4XTtcbiAgfVxuICByZXR1cm4gbnVsbDtcbn1cblxuUmVzb3VyY2UucHJvdG90eXBlLnZhbGlkYXRpb25Jc3N1ZXMgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIHRoaXMuX3ZhbGlkYXRpb247XG59O1xuXG4vLyBhbGlhcyBkZWZpbml0aW9uc1xuUmVzb3VyY2UucHJvdG90eXBlLmFsbExpbmtzID0gUmVzb3VyY2UucHJvdG90eXBlLmFsbExpbmtBcnJheXM7XG5SZXNvdXJjZS5wcm90b3R5cGUuYWxsRW1iZWRkZWRBcnJheXMgPVxuICAgIFJlc291cmNlLnByb3RvdHlwZS5hbGxFbWJlZGRlZFJlc291cmNlcyA9XG4gICAgUmVzb3VyY2UucHJvdG90eXBlLmFsbEVtYmVkZGVkUmVzb3VyY2VBcnJheXM7XG5SZXNvdXJjZS5wcm90b3R5cGUuZW1iZWRkZWRBcnJheSA9IFJlc291cmNlLnByb3RvdHlwZS5lbWJlZGRlZFJlc291cmNlQXJyYXk7XG5SZXNvdXJjZS5wcm90b3R5cGUuZW1iZWRkZWQgPSBSZXNvdXJjZS5wcm90b3R5cGUuZW1iZWRkZWRSZXNvdXJjZTtcblJlc291cmNlLnByb3RvdHlwZS52YWxpZGF0aW9uID0gUmVzb3VyY2UucHJvdG90eXBlLnZhbGlkYXRpb25Jc3N1ZXM7XG5cbm1vZHVsZS5leHBvcnRzID0gUmVzb3VyY2U7XG4iLCJtb2R1bGUuZXhwb3J0cz1mdW5jdGlvbihuKXt2YXIgdD17fSxlPVtdO249bnx8dGhpcyxuLm9uPWZ1bmN0aW9uKG4sZSxsKXsodFtuXT10W25dfHxbXSkucHVzaChbZSxsXSl9LG4ub2ZmPWZ1bmN0aW9uKG4sbCl7bnx8KHQ9e30pO2Zvcih2YXIgbz10W25dfHxlLGk9by5sZW5ndGg9bD9vLmxlbmd0aDowO2ktLTspbD09b1tpXVswXSYmby5zcGxpY2UoaSwxKX0sbi5lbWl0PWZ1bmN0aW9uKG4pe2Zvcih2YXIgbCxvPXRbbl18fGUsaT1vLmxlbmd0aD4wP28uc2xpY2UoMCxvLmxlbmd0aCk6byxjPTA7bD1pW2MrK107KWxbMF0uYXBwbHkobFsxXSxlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDEpKX19OyJdfQ=="}